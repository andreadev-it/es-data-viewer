{"mappings":"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","sources":["node_modules/es-data-parser/dist/index.js","node_modules/es-data-parser/dist/main.js","node_modules/es-data-parser/dist/es-objects/ParsedData.js","node_modules/es-data-parser/dist/lexer.js","node_modules/es-data-parser/dist/structures.js","node_modules/es-data-parser/dist/parser.js","node_modules/es-data-parser/dist/es-objects/System.js","node_modules/es-data-parser/dist/es-objects/SystemObject.js","node_modules/es-data-parser/dist/es-objects/Galaxy.js","node_modules/es-data-parser/dist/es-objects/Color.js","node_modules/es-data-parser/dist/es-objects/Government.js","node_modules/es-data-parser/dist/es-objects/Planet.js","node_modules/es-data-parser/dist/es-objects/Wormhole.js","node_modules/es-data-parser/dist/utils.js","node_modules/@andreadev/canvas-lib/dist/main.js","node_modules/@andreadev/canvas-lib/dist/utils.js","node_modules/@andreadev/canvas-lib/dist/modules/pan-zoom-plugin.js","src/scripts/game-functions/system.ts","src/scripts/game-functions/galaxy.ts","src/scripts/views/galaxy.ts","src/scripts/setupCanvasLib.ts","src/scripts/utils.ts","src/scripts/game-functions/sprites.ts","src/main.ts","src/scripts/ui.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Wormhole = exports.SystemObject = exports.System = exports.Planet = exports.ParsedData = exports.Government = exports.Galaxy = exports.Color = exports.parseFiles = exports.parseFile = void 0;\nvar main_1 = require(\"./main\");\nObject.defineProperty(exports, \"parseFile\", { enumerable: true, get: function () { return main_1.parseFile; } });\nObject.defineProperty(exports, \"parseFiles\", { enumerable: true, get: function () { return main_1.parseFiles; } });\nvar Color_1 = require(\"./es-objects/Color\");\nObject.defineProperty(exports, \"Color\", { enumerable: true, get: function () { return Color_1.Color; } });\nvar Galaxy_1 = require(\"./es-objects/Galaxy\");\nObject.defineProperty(exports, \"Galaxy\", { enumerable: true, get: function () { return Galaxy_1.Galaxy; } });\nvar Government_1 = require(\"./es-objects/Government\");\nObject.defineProperty(exports, \"Government\", { enumerable: true, get: function () { return Government_1.Government; } });\nvar ParsedData_1 = require(\"./es-objects/ParsedData\");\nObject.defineProperty(exports, \"ParsedData\", { enumerable: true, get: function () { return ParsedData_1.ParsedData; } });\nvar Planet_1 = require(\"./es-objects/Planet\");\nObject.defineProperty(exports, \"Planet\", { enumerable: true, get: function () { return Planet_1.Planet; } });\nvar System_1 = require(\"./es-objects/System\");\nObject.defineProperty(exports, \"System\", { enumerable: true, get: function () { return System_1.System; } });\nvar SystemObject_1 = require(\"./es-objects/SystemObject\");\nObject.defineProperty(exports, \"SystemObject\", { enumerable: true, get: function () { return SystemObject_1.SystemObject; } });\nvar Wormhole_1 = require(\"./es-objects/Wormhole\");\nObject.defineProperty(exports, \"Wormhole\", { enumerable: true, get: function () { return Wormhole_1.Wormhole; } });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseFiles = exports.parseFile = void 0;\n// import { parse } from \"./parser\";\nconst ParsedData_1 = require(\"./es-objects/ParsedData\");\nconst lexer_1 = require(\"./lexer\");\nconst parser_1 = require(\"./parser\");\nconst utils_1 = require(\"./utils\");\nasync function parseFile(file, filename, previousData) {\n    const parsedData = previousData !== null && previousData !== void 0 ? previousData : new ParsedData_1.ParsedData();\n    let fileContent = await (0, utils_1.readFile)(file);\n    let data = (0, lexer_1.lex)(fileContent, filename);\n    (0, parser_1.parse)(data, parsedData);\n    return parsedData;\n}\nexports.parseFile = parseFile;\nasync function parseFiles(files) {\n    const parsedData = new ParsedData_1.ParsedData();\n    for (let file of files) {\n        await parseFile(file, file.webkitRelativePath, parsedData);\n    }\n    return parsedData;\n}\nexports.parseFiles = parseFiles;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ParsedData = void 0;\nclass ParsedData {\n    constructor() {\n        this.galaxies = new Map();\n        this.starSystems = new Map();\n        this.colors = new Map();\n        this.governments = new Map();\n        this.planets = new Map();\n        this.wormholes = new Map();\n    }\n    addGalaxy(galaxy) {\n        this.galaxies.set(galaxy.name, galaxy);\n    }\n    addStarSystem(starSystem) {\n        this.starSystems.set(starSystem.name, starSystem);\n    }\n    addColor(color) {\n        this.colors.set(color.name, color);\n    }\n    addGovernment(gov) {\n        this.governments.set(gov.name, gov);\n    }\n    addPlanet(planet) {\n        this.planets.set(planet.name, planet);\n    }\n    addWormhole(wormhole) {\n        this.wormholes.set(wormhole.name, wormhole);\n    }\n}\nexports.ParsedData = ParsedData;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.lex = void 0;\nconst structures_1 = require(\"./structures\");\nfunction lex(data, filename = \"\") {\n    const root = new structures_1.FileRoot([], 0, filename);\n    let isQuoteOpen = false;\n    let isComment = false;\n    let currentQuote = \"\";\n    let currentLine = new structures_1.Line([], 0);\n    let currentToken = \"\";\n    let parentLevels = [root];\n    for (let i = 0; i < data.length; i++) {\n        const c = data[i];\n        let nextLine = null;\n        if (isComment && c != '\\n')\n            continue;\n        switch (c) {\n            // handle comments\n            case '#':\n                if (currentToken.length == 0 && !isQuoteOpen) {\n                    isComment = true;\n                }\n                break;\n            // handle quotes\n            case '\"':\n            case '`':\n                if (isQuoteOpen && c == currentQuote) {\n                    isQuoteOpen = false;\n                    if (currentToken.length == 0) {\n                        currentLine.tokens.push('');\n                    }\n                    break;\n                }\n                if (!isQuoteOpen && currentToken.length == 0) {\n                    isQuoteOpen = true;\n                    currentQuote = c;\n                    break;\n                }\n                if (!isQuoteOpen) {\n                    throw new Error(`Unescaped quote in string after ${currentToken}`);\n                }\n                break;\n            // handle newlines\n            case '\\n':\n                if (currentToken != '' && !isComment) {\n                    currentLine.tokens.push(currentToken);\n                }\n                currentToken = '';\n                isComment = false;\n                nextLine = new structures_1.Line([], 0);\n                // ignore blank lines\n                if (currentLine.tokens.length == 0) {\n                    currentLine = nextLine;\n                    continue;\n                }\n                // handle too much indentation\n                if (currentLine.indentation > parentLevels.length - 1) {\n                    throw new Error(`Unexpected indentation for line ${currentLine.tokens.join(' ')}`);\n                }\n                // adding the line as children to its parent based on indentation\n                if (currentLine.indentation >= 0) {\n                    parentLevels[currentLine.indentation].children.push(currentLine);\n                }\n                // adding new line as parent level for following data\n                if (currentLine.indentation == parentLevels.length - 1) {\n                    parentLevels.push(currentLine);\n                }\n                else {\n                    // if indentation is smaller then the number of parents, it means that\n                    // previous deeper nested parents has ended their block, so we delete them\n                    parentLevels = parentLevels.slice(0, currentLine.indentation + 1);\n                    parentLevels.push(currentLine);\n                }\n                if (isQuoteOpen) {\n                    throw new Error(`A quote was left open near: '${currentToken}'`);\n                }\n                currentLine = nextLine;\n                break;\n            // handle spaces\n            case ' ':\n                if (!isQuoteOpen) {\n                    if (currentToken.length > 0) {\n                        currentLine.tokens.push(currentToken);\n                        currentToken = \"\";\n                    }\n                }\n                else {\n                    currentToken += \" \";\n                }\n                break;\n            // handle tabs\n            case '\\t':\n                if (!isQuoteOpen &&\n                    currentLine.tokens.length == 0 &&\n                    currentToken.length == 0) {\n                    currentLine.indentation++;\n                }\n                else if (!isQuoteOpen && currentToken.length > 0) {\n                    // Add tabs as token separators too to avoid the error in some official files\n                    currentLine.tokens.push(currentToken);\n                    currentToken = \"\";\n                }\n                else {\n                    currentToken += \"\\t\";\n                }\n                break;\n            // handle other characters\n            default:\n                currentToken += c;\n        }\n    }\n    return root;\n}\nexports.lex = lex;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FileRoot = exports.Line = void 0;\nclass Line {\n    constructor(tokens, indentation) {\n        this.tokens = tokens;\n        this.indentation = indentation;\n        this.children = [];\n    }\n    toString() {\n        const tokensText = [...this.tokens];\n        let text = \"\";\n        for (const token of tokensText) {\n            if (token.includes(' ')) {\n                if (token.includes('\"')) {\n                    text += \"`\" + token + \"`\";\n                }\n                else {\n                    text += `\"${token}\"`;\n                }\n            }\n            else {\n                text += token + \" \";\n            }\n        }\n        return text;\n    }\n}\nexports.Line = Line;\nclass FileRoot extends Line {\n    constructor(tokens, indentation, filename) {\n        super(tokens, indentation);\n        this.tokens = tokens;\n        this.indentation = indentation;\n        this.isRoot = true;\n        this.filename = filename;\n    }\n}\nexports.FileRoot = FileRoot;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parse = void 0;\nconst ParsedData_1 = require(\"./es-objects/ParsedData\");\nconst System_1 = require(\"./es-objects/System\");\nconst Galaxy_1 = require(\"./es-objects/Galaxy\");\nconst Color_1 = require(\"./es-objects/Color\");\nconst Government_1 = require(\"./es-objects/Government\");\nconst Planet_1 = require(\"./es-objects/Planet\");\nconst Wormhole_1 = require(\"./es-objects/Wormhole\");\nfunction parse(root, previousData = null) {\n    const parsedData = previousData !== null && previousData !== void 0 ? previousData : new ParsedData_1.ParsedData();\n    for (let child of root.children) {\n        if (child.tokens[0] == 'system') {\n            parsedData.addStarSystem(System_1.System.fromLine(parsedData, child));\n        }\n        else if (child.tokens[0] == 'galaxy') {\n            parsedData.addGalaxy(Galaxy_1.Galaxy.fromLine(parsedData, child));\n        }\n        else if (child.tokens[0] == 'color') {\n            parsedData.addColor(Color_1.Color.fromLine(parsedData, child));\n        }\n        else if (child.tokens[0] == 'government') {\n            parsedData.addGovernment(Government_1.Government.fromLine(parsedData, child));\n        }\n        else if (child.tokens[0] == 'planet') {\n            parsedData.addPlanet(Planet_1.Planet.fromLine(parsedData, child));\n        }\n        else if (child.tokens[0] == 'wormhole') {\n            parsedData.addWormhole(Wormhole_1.Wormhole.fromLine(parsedData, child));\n        }\n    }\n    return parsedData;\n}\nexports.parse = parse;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.System = void 0;\nconst SystemObject_1 = require(\"./SystemObject\");\nclass System {\n    static fromLine(data, dataLine) {\n        if (dataLine.tokens[0] != 'system') {\n            throw new Error(\"Not a system\");\n        }\n        const name = dataLine.tokens[1];\n        let pos = { x: 0, y: 0 };\n        let foundPos = false;\n        let links = [];\n        let government = \"\";\n        let attributes = [];\n        const objects = [];\n        for (let child of dataLine.children) {\n            switch (child.tokens[0]) {\n                // Extract the position\n                case 'pos':\n                    pos = {\n                        x: parseInt(child.tokens[1]),\n                        y: parseInt(child.tokens[2])\n                    };\n                    foundPos = true;\n                    break;\n                // Extract the links\n                case 'link':\n                    links.push(child.tokens[1]);\n                    break;\n                // Set the system government\n                case 'government':\n                    government = child.tokens[1];\n                    break;\n                // Save a list of attributes\n                case 'attributes':\n                    attributes = child.tokens.slice(1);\n                    break;\n                // Parse the objects in the system\n                case 'object':\n                    objects.push(SystemObject_1.SystemObject.fromLine(data, child));\n            }\n        }\n        if (!foundPos) {\n            throw new Error(\"No position found for this system\");\n        }\n        const system = new System(data, name, pos);\n        system.links = links;\n        system.government = government;\n        system.attributes = attributes;\n        system.objects = objects;\n        return system;\n    }\n    constructor(data, name, pos) {\n        this.links = [];\n        this.government = \"\";\n        this.attributes = [];\n        this.objects = [];\n        this.isSelected = false;\n        this.name = name;\n        this.position = pos;\n        this.esData = data;\n    }\n}\nexports.System = System;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SystemObject = void 0;\nclass SystemObject {\n    constructor(esData, distance, period, offset = 0) {\n        this.esData = esData;\n        this.name = \"\";\n        this.sprite = \"\";\n        this.offset = 0;\n        this.objects = [];\n        this.distance = distance;\n        this.period = period;\n    }\n    static fromLine(data, dataLine) {\n        if (dataLine.tokens[0] != 'object') {\n            throw new Error(\"Not an object\");\n        }\n        const name = (dataLine.tokens.length == 2) ? dataLine.tokens[1] : \"\";\n        let sprite = \"\";\n        let distance = 0;\n        let period = 0;\n        let offset = 0;\n        const objects = [];\n        for (let child of dataLine.children) {\n            switch (child.tokens[0]) {\n                case 'sprite':\n                    sprite = child.tokens[1];\n                    break;\n                case 'distance':\n                    distance = parseFloat(child.tokens[1]);\n                    break;\n                case 'period':\n                    period = parseFloat(child.tokens[1]);\n                    break;\n                case 'offset':\n                    offset = parseFloat(child.tokens[1]);\n                    break;\n                case 'object':\n                    objects.push(SystemObject.fromLine(data, child));\n            }\n        }\n        const systemObject = new SystemObject(data, distance, period, offset);\n        systemObject.name = name;\n        systemObject.objects = objects;\n        systemObject.sprite = sprite;\n        return systemObject;\n    }\n}\nexports.SystemObject = SystemObject;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Galaxy = void 0;\nclass Galaxy {\n    static fromLine(data, dataLine) {\n        if (dataLine.tokens[0] != 'galaxy') {\n            throw new Error(\"Not a galaxy\");\n        }\n        const name = dataLine.tokens[1];\n        let pos = { x: 0, y: 0 };\n        let foundPos = false;\n        let sprite = \"\";\n        for (let child of dataLine.children) {\n            if (child.tokens[0] == 'pos') {\n                pos = {\n                    x: parseInt(child.tokens[1]),\n                    y: parseInt(child.tokens[2])\n                };\n                foundPos = true;\n                continue;\n            }\n            if (child.tokens[0] == 'sprite') {\n                sprite = child.tokens[1];\n            }\n        }\n        if (!foundPos) {\n            throw new Error(\"No position found for this system\");\n        }\n        const galaxy = new Galaxy(data, name, pos);\n        galaxy.sprite = sprite;\n        return galaxy;\n    }\n    constructor(data, name, pos) {\n        this.position = { x: 0, y: 0 };\n        this.sprite = \"\";\n        this.name = name;\n        this.position = pos;\n        this.esData = data;\n    }\n}\nexports.Galaxy = Galaxy;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Color = void 0;\nclass Color {\n    constructor(name, r, g, b, a = 255) {\n        this.name = name;\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n    }\n    toString() {\n        if (this.a == 255) {\n            return `rgb(${this.r}, ${this.g}, ${this.b})`;\n        }\n        return `rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`;\n    }\n    // The first argument is important to allow standardization across the different game objects\n    static fromLine(_, dataLine) {\n        let label = dataLine.tokens[1];\n        let r = parseFloat(dataLine.tokens[2]);\n        let g = parseFloat(dataLine.tokens[3]);\n        let b = parseFloat(dataLine.tokens[4]);\n        let a = 255;\n        if (dataLine.tokens.length == 6) {\n            a = parseFloat(dataLine.tokens[5]);\n        }\n        return Color.fromPercentages(label, r, g, b, a);\n    }\n    static fromPercentages(label, r, g, b, a) {\n        return new Color(label, r * 255, g * 255, b * 255, a * 255);\n    }\n    static fromGovernment(data, govName) {\n        let government = data.governments.get(govName);\n        if (!government) {\n            return null;\n        }\n        if (government.color instanceof Color) {\n            return government.color;\n        }\n        let color = data.colors.get(government.color);\n        if (!color) {\n            return null;\n        }\n        return color;\n    }\n}\nexports.Color = Color;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Government = void 0;\nconst Color_1 = require(\"./Color\");\nclass Government {\n    static fromLine(data, dataLine) {\n        if (dataLine.tokens[0] != 'government') {\n            throw new Error(\"Not a government\");\n        }\n        const name = dataLine.tokens[1];\n        let color = \"\";\n        for (let child of dataLine.children) {\n            if (child.tokens[0] == 'color') {\n                if (child.tokens.length == 2) {\n                    color = child.tokens[1];\n                }\n                else {\n                    let r = parseFloat(dataLine.tokens[1]);\n                    let g = parseFloat(dataLine.tokens[2]);\n                    let b = parseFloat(dataLine.tokens[3]);\n                    let a = 255;\n                    if (dataLine.tokens.length == 5) {\n                        a = parseFloat(dataLine.tokens[4]);\n                    }\n                    color = Color_1.Color.fromPercentages('', r, g, b, a);\n                }\n            }\n        }\n        const government = new Government(data, name);\n        government.color = color;\n        return government;\n    }\n    constructor(data, name) {\n        this.color = \"\";\n        this.esData = data;\n        this.name = name;\n    }\n}\nexports.Government = Government;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Planet = void 0;\nclass Planet {\n    constructor(esData, name) {\n        this.esData = esData;\n        this.name = name;\n        this.wormhole = \"\";\n    }\n    static fromLine(data, dataLine) {\n        if (dataLine.tokens[0] != 'planet') {\n            throw new Error(\"Not a planet\");\n        }\n        const name = dataLine.tokens[1];\n        let wormhole = \"\";\n        for (let child of dataLine.children) {\n            if (child.tokens[0] == 'wormhole') {\n                wormhole = child.tokens[1];\n            }\n        }\n        let planet = new Planet(data, name);\n        planet.wormhole = wormhole;\n        return planet;\n    }\n}\nexports.Planet = Planet;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Wormhole = void 0;\nconst Color_1 = require(\"./Color\");\nclass Wormhole {\n    constructor(esData, name) {\n        this.esData = esData;\n        this.name = name;\n        this.isMappable = false;\n        this.links = [];\n        this.color = \"\";\n    }\n    static fromLine(data, dataLine) {\n        if (dataLine.tokens[0] != 'wormhole') {\n            throw new Error(\"Not a wormhole\");\n        }\n        const name = dataLine.tokens[1];\n        let mappable = false;\n        let color = \"\";\n        let links = [];\n        for (let child of dataLine.children) {\n            switch (child.tokens[0]) {\n                case 'color':\n                    if (child.tokens.length == 2) {\n                        color = child.tokens[1];\n                    }\n                    else {\n                        let r = parseFloat(dataLine.tokens[1]);\n                        let g = parseFloat(dataLine.tokens[2]);\n                        let b = parseFloat(dataLine.tokens[3]);\n                        let a = 255;\n                        if (dataLine.tokens.length == 5) {\n                            a = parseFloat(dataLine.tokens[4]);\n                        }\n                        color = Color_1.Color.fromPercentages('', r, g, b, a);\n                    }\n                    break;\n                case 'link':\n                    links.push([child.tokens[1], child.tokens[2]]);\n                    break;\n                case 'mappable':\n                    mappable = true;\n                    break;\n            }\n        }\n        const wormhole = new Wormhole(data, name);\n        wormhole.isMappable = mappable;\n        wormhole.color = color;\n        wormhole.links = links;\n        return wormhole;\n    }\n}\nexports.Wormhole = Wormhole;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.readFile = void 0;\nfunction readFile(file) {\n    return new Promise((resolve, _) => {\n        const reader = new FileReader();\n        reader.onload = () => {\n            resolve(reader.result);\n        };\n        reader.readAsText(file);\n    });\n}\nexports.readFile = readFile;\n","export class CanvasLib extends EventTarget {\n    constructor(canvas) {\n        super();\n        this.canvas = canvas;\n        this.plugins = new Map();\n        const ctx = this.canvas.getContext(\"2d\");\n        if (ctx == null) {\n            throw ('Could not get the context for the canvas');\n        }\n        this.context = ctx;\n    }\n    renderCycle() {\n        this.paint();\n        window.requestAnimationFrame(() => this.renderCycle());\n    }\n    use(PluginClass, settings) {\n        const plugin = new PluginClass(this, settings);\n        this.plugins.set(plugin.name, plugin);\n    }\n    getPlugin(PluginClass) {\n        for (let plugin of this.plugins.values()) {\n            if (plugin instanceof PluginClass) {\n                return plugin;\n            }\n        }\n        return undefined;\n    }\n    /**\n     * Main paint function for the canvas\n     *\n     * @param shouldClear If true, clear the canvas before painting\n     */\n    paint(shouldClear = true) {\n        this.prepareContext(shouldClear);\n        const prop = { context: this.context };\n        this.preRender(prop);\n        this.render(prop);\n        this.postRender(prop);\n    }\n    prepareContext(shouldClear = true) {\n        this.context.resetTransform();\n        if (shouldClear) {\n            this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        }\n        this.context.translate(Math.floor(this.canvas.width / 2), Math.floor(this.canvas.height / 2));\n    }\n    /**\n     * Just a utility function to make the user code less heavy\n     */\n    on(event, callback) {\n        this.addEventListener(event, callback);\n    }\n    startRendering() {\n        window.requestAnimationFrame(() => this.renderCycle());\n    }\n    preRender(eventProp) {\n        const e = new CustomEvent('prerender', { detail: eventProp });\n        this.dispatchEvent(e);\n    }\n    render(eventProp) {\n        const e = new CustomEvent('render', { detail: eventProp });\n        this.dispatchEvent(e);\n    }\n    postRender(eventProp) {\n        const e = new CustomEvent('postrender', { detail: eventProp });\n        this.dispatchEvent(e);\n    }\n}\n","export function throttle(func, wait) {\n    let timeout;\n    let isThrottled = false;\n    return function () {\n        if (isThrottled) {\n            return;\n        }\n        const context = this;\n        const args = arguments;\n        func.apply(context, args);\n        clearTimeout(timeout);\n        timeout = setTimeout(() => (isThrottled = false), wait);\n        isThrottled = true;\n    };\n}\n","import { throttle } from \"../utils\";\nexport class PanZoomPlugin {\n    constructor(app, settings) {\n        var _a, _b, _c;\n        this.app = app;\n        this.settings = settings;\n        this.name = \"PanZoom\";\n        this.currentZoom = 1;\n        this.minZoom = 0.1;\n        this.maxZoom = 10;\n        this.panButton = 1; // Middle\n        this.cameraOffset = { x: 0, y: 0 };\n        this.isPanning = false;\n        this.startedPanningOffset = { x: 0, y: 0 };\n        this.startedPanningPosition = { x: 0, y: 0 };\n        this.throttle = -1;\n        this.bindEvents();\n        this.minZoom = (_a = settings.minZoom) !== null && _a !== void 0 ? _a : this.minZoom;\n        this.maxZoom = (_b = settings.maxZoom) !== null && _b !== void 0 ? _b : this.maxZoom;\n        this.throttle = (_c = settings.throttle) !== null && _c !== void 0 ? _c : this.throttle;\n        this.throttledPaint = throttle(this.app.paint.bind(this.app), this.throttle);\n        let mouseButtons = {\n            'left': 0,\n            'middle': 1,\n            'right': 2,\n            'any': -1\n        };\n        if (settings.panButton)\n            this.panButton = mouseButtons[settings.panButton];\n    }\n    bindEvents() {\n        this.app.on('prerender', this.transformCanvas.bind(this));\n        this.app.canvas.addEventListener('pointerdown', this.onPointerDown.bind(this));\n        this.app.canvas.addEventListener('pointerup', this.onPointerUp.bind(this));\n        this.app.canvas.addEventListener('pointermove', this.onPointerMove.bind(this));\n        this.app.canvas.addEventListener('pointerleave', this.onPointerUp.bind(this));\n        this.app.canvas.addEventListener('wheel', this.onScroll.bind(this));\n    }\n    screenToLocalPoint(x, y) {\n        let hw = this.app.canvas.width / 2;\n        let hh = this.app.canvas.height / 2;\n        let tx = this.cameraOffset.x;\n        let ty = this.cameraOffset.y;\n        let z = this.currentZoom;\n        // center\n        x = x - hw;\n        y = y - hh;\n        // scale\n        x = x / z;\n        y = y / z;\n        // trnaslate\n        x = x - tx;\n        y = y - ty;\n        return { x, y };\n    }\n    zoom(amount) {\n        this.currentZoom += amount;\n        this.currentZoom = Math.min(Math.max(this.minZoom, this.currentZoom), this.maxZoom);\n        this.currentZoom = Math.floor(this.currentZoom * 1000) / 1000;\n        this.updateRender();\n    }\n    transformCanvas(e) {\n        e.detail.context.scale(this.currentZoom, this.currentZoom);\n        e.detail.context.translate(this.cameraOffset.x, this.cameraOffset.y);\n    }\n    onPointerDown(e) {\n        if (e.button == this.panButton || this.panButton == -1) {\n            this.isPanning = true;\n            this.startedPanningOffset = this.cameraOffset;\n            this.startedPanningPosition = { x: e.clientX, y: e.clientY };\n        }\n    }\n    onPointerUp(_) {\n        this.isPanning = false;\n    }\n    onPointerMove(e) {\n        if (this.isPanning) {\n            this.cameraOffset = {\n                x: this.startedPanningOffset.x + ((e.clientX - this.startedPanningPosition.x) / this.currentZoom),\n                y: this.startedPanningOffset.y + ((e.clientY - this.startedPanningPosition.y) / this.currentZoom),\n            };\n            this.updateRender();\n        }\n    }\n    onScroll(e) {\n        this.zoom(e.deltaY / 1000);\n    }\n    updateRender() {\n        if (this.throttle > 0) {\n            this.throttledPaint();\n        }\n        else {\n            this.app.paint();\n        }\n    }\n    static getDataFromMatrix(matrix) {\n        return {\n            scaleX: matrix.a,\n            scaleY: matrix.d,\n            translateX: matrix.e,\n            translateY: matrix.f,\n            skewX: matrix.b,\n            skewY: matrix.c\n        };\n    }\n    static fixedNumber(number, context, direction = 'x') {\n        let { scaleX, scaleY } = this.getDataFromMatrix(context.getTransform());\n        return direction == 'x' ? number * (1 / scaleX) : number * (1 / scaleY);\n    }\n    static fixedSize(width, height, context) {\n        let { scaleX, scaleY } = this.getDataFromMatrix(context.getTransform());\n        return {\n            width: width * (1 / scaleX),\n            height: height * (1 / scaleY)\n        };\n    }\n}\n","import { System } from 'es-data-parser';\nimport { PanZoomPlugin } from '@andreadev/canvas-lib/dist/modules/pan-zoom-plugin';\nimport { Color } from 'es-data-parser';\nimport { Point } from 'es-data-parser';\n\nconst pinSize = 3;\nconst pinLineWidth = 2;\nconst linkColor = 'rgba(255,255,255,0.2)';\nconst tagNameOffset = 4;\nconst tagNameColor = 'rgba(255,255,255,0.3)';\nconst tagNameFontSize = 12;\n\n/**\n * Calculate the distance of a point to a star system\n */\nexport function distanceFromSystem(system: System, position: Point): number {\n    return Math.sqrt(\n        Math.pow(system.position.x - position.x, 2) +\n        Math.pow(system.position.y - position.y, 2)\n    );\n}\n\n/**\n * Rendering function for the endless sky systems\n */\nexport function renderSystem(system: System, ctx: CanvasRenderingContext2D) {\n    // renderSystemSelection(system, ctx);\n    renderSystemLinks(system, ctx);\n    renderSystemPin(system, ctx);\n    renderSystemName(system, ctx);\n}\n\nexport function renderSystemSelection(system: System, ctx: CanvasRenderingContext2D) {\n    ctx.beginPath();\n    ctx.fillStyle = 'rgba(100,100,255,0.2)';\n    ctx.strokeStyle = 'darkblue';\n    ctx.lineWidth = PanZoomPlugin.fixedNumber(1, ctx);\n    let width = PanZoomPlugin.fixedNumber(15, ctx);\n    ctx.ellipse(\n        system.position.x,\n        system.position.y,\n        width,\n        width,\n        0, 0, 2 * Math.PI\n    );\n    ctx.fill();\n    ctx.stroke();\n}\n\nexport function renderSystemLinks(system: System, ctx: CanvasRenderingContext2D) {\n    // Render the links\n    ctx.lineWidth = PanZoomPlugin.fixedNumber(1, ctx);\n    ctx.strokeStyle = linkColor;\n\n    for (let link of system.links) {\n        ctx.beginPath();\n        ctx.moveTo(system.position.x, system.position.y);\n\n        const targetSystem = system.esData.starSystems.get(link);\n        if (!targetSystem)\n            continue;\n\n        ctx.lineTo(targetSystem.position.x, targetSystem.position.y);\n        ctx.stroke();\n    }\n}\n\nexport function renderSystemPin(system: System, ctx: CanvasRenderingContext2D) {\n    // Render the circle\n    // Get the government color\n    let color = Color.fromGovernment(system.esData, system.government)?.toString();\n    if (!color) {\n        color = '#aaa';\n    }\n\n    ctx.beginPath();\n    ctx.fillStyle = 'black';\n    ctx.strokeStyle = color;\n    ctx.lineWidth = PanZoomPlugin.fixedNumber(pinLineWidth, ctx);\n    let {width, height} = PanZoomPlugin.fixedSize(pinSize, pinSize, ctx);\n    ctx.ellipse(system.position.x, system.position.y, width, height, 0, 0, 2 * Math.PI);\n    ctx.fill();\n    ctx.stroke();\n}\n\nexport function renderSystemName(system: System, ctx: CanvasRenderingContext2D) {\n    // Render the name\n    let { scaleX: scale } = PanZoomPlugin.getDataFromMatrix(ctx.getTransform());\n    // If it's too small to render the name, interrupt the export function\n    if (scale < 0.5) {\n        return;\n    }\n\n    let fontSize = PanZoomPlugin.fixedNumber(tagNameFontSize, ctx)\n    ctx.font = `${fontSize}px Arial`;\n    ctx.fillStyle = tagNameColor;\n    let offset = PanZoomPlugin.fixedNumber(tagNameOffset, ctx);\n    let {width, height} = PanZoomPlugin.fixedSize(pinSize, pinSize, ctx);\n    ctx.fillText(system.name, system.position.x + width + offset, system.position.y + height);\n}\n","import { Galaxy } from \"es-data-parser\";\nimport { SpriteList } from \"./sprites\";\n\nexport async function renderGalaxy(galaxy: Galaxy, spriteList: SpriteList, ctx: CanvasRenderingContext2D) {\n    // Render the sprite\n    if (galaxy.sprite == '') {\n        return;\n    }\n\n    let spriteImage : HTMLImageElement | undefined = spriteList.loadedSprites.get(galaxy.sprite);\n\n    // The sprite image isn't loaded\n    if (!spriteImage) {\n        const spriteFile = spriteList.sprites.get(galaxy.sprite);\n\n        if (!spriteFile) {\n            console.error(`Sprite ${galaxy.sprite} not found`);\n            return;\n        }\n\n        spriteImage = await spriteList.load(galaxy.sprite, spriteFile);\n    }\n\n    ctx.drawImage(\n        spriteImage,\n        galaxy.position.x - (spriteImage.width / 2),\n        galaxy.position.y - (spriteImage.height / 2)\n    );\n}\n","import { ParsedData, SystemObject } from \"es-data-parser\";\nimport { PanZoomPlugin } from \"@andreadev/canvas-lib/dist/modules/pan-zoom-plugin\";\nimport { View } from \"./abstract\";\nimport { CanvasLib } from \"@andreadev/canvas-lib\";\nimport { System } from \"es-data-parser\";\nimport { distanceFromSystem } from \"../game-functions/system\";\nimport { renderSystemSelection, renderSystemPin, renderSystemLinks, renderSystemName } from \"../game-functions/system\";\nimport { renderGalaxy } from \"../game-functions/galaxy\";\nimport { SpriteList } from \"../game-functions/sprites\";\n\n\nexport class GalaxyView extends EventTarget implements View {\n\n    shouldRenderNames = true;\n    shouldRenderLinks = true;\n    shouldRenderDots  = true;\n    shouldRenderGalaxies = true;\n    shouldRenderWormholeLinks = true;\n    shouldRenderHiddenWormholes = false;\n    currentlySelected: System | null = null;\n    systemLinksCache: Set<string> = new Set();\n\n    constructor(private esData: ParsedData, private spriteList: SpriteList, private canvasLib: CanvasLib) { \n        super();\n\n        this.canvasLib.canvas.addEventListener('pointerdown', this.onCanvasClick.bind(this));\n    }\n\n    async activate() {\n        document.getElementById('toggle-galaxies')?.addEventListener('change', this.toggleGalaxies.bind(this))\n        document.getElementById('toggle-pins')?.addEventListener('change', this.toggleDots.bind(this))\n        document.getElementById('toggle-names')?.addEventListener('change', this.toggleNames.bind(this))\n        document.getElementById('toggle-links')?.addEventListener('change', this.toggleLinks.bind(this))\n        document.getElementById('toggle-wormholes')?.addEventListener('change', this.toggleWormholes.bind(this))\n        document.getElementById('toggle-hidden-wormholes')?.addEventListener('change', this.toggleHiddenWormholes.bind(this))\n\n        this.buildSystemLinksCache();\n\n        await this.preloadGalaxySprites();\n    }\n\n    async deactivate() {\n        // Removing event listeners will not work because of \"bind\"\n        // document.getElementById('toggle-galaxies')?.removeEventListener('change', this.toggleGalaxies)\n        // document.getElementById('toggle-pins')?.addEventListener('change', this.toggleDots)\n        // document.getElementById('toggle-names')?.addEventListener('change', this.toggleNames)\n        // document.getElementById('toggle-links')?.addEventListener('change', this.toggleLinks)\n    }\n\n    toggleNames(e: Event) {\n        this.shouldRenderNames = (<HTMLInputElement>e.target).checked; \n        this.canvasLib.paint();\n    }\n    toggleLinks(e: Event) {\n        this.shouldRenderLinks = (<HTMLInputElement>e.target).checked; \n        this.canvasLib.paint();\n    }\n    toggleDots(e: Event) {\n        this.shouldRenderDots = (<HTMLInputElement>e.target).checked; \n        this.canvasLib.paint();\n    }\n    toggleGalaxies(e: Event) {\n        this.shouldRenderGalaxies = (<HTMLInputElement>e.target).checked; \n        this.canvasLib.paint();\n    }\n    toggleWormholes(e: Event) {\n        this.shouldRenderWormholeLinks = (<HTMLInputElement>e.target).checked; \n        this.canvasLib.paint();\n    }\n    toggleHiddenWormholes(e: Event) {\n        this.shouldRenderHiddenWormholes = (<HTMLInputElement>e.target).checked; \n        this.canvasLib.paint();\n    }\n\n    onCanvasClick(e: PointerEvent) {\n        if (e.button !== 0) return;\n\n        let panZoomPlugin = this.canvasLib.getPlugin(PanZoomPlugin);\n        if (!panZoomPlugin) return;\n\n        let point = panZoomPlugin.screenToLocalPoint(e.clientX, e.clientY);\n\n        let closest: System | null = null;\n        let closestDistance = 10000; // High number\n        let minimumDistance = 10;\n        let ctx = this.canvasLib.canvas.getContext('2d');\n        if (ctx) {\n            minimumDistance = PanZoomPlugin.fixedNumber(10, ctx);\n        }\n\n        for (let system of this.esData.starSystems.values()) {\n            let d = distanceFromSystem(system, point);\n            if (d > minimumDistance) continue;\n\n            if (!closest || d < closestDistance) {\n                closest = system;\n                closestDistance = d;\n            }\n        }\n\n        if (!closest) {\n            this.removeSelection();\n            return;\n        }\n\n        this.selectSystem(closest);\n    }\n\n    removeSelection() {\n        if (!this.currentlySelected) return;\n\n        this.currentlySelected.isSelected = false;\n        this.currentlySelected = null;\n\n        this.canvasLib.paint();\n    }\n\n    selectSystem(system: System) {\n        this.currentlySelected = system;\n        this.updateStarSystemInfo(system);\n        \n        this.canvasLib.paint();\n    }\n\n    updateStarSystemInfo(system: System) {\n        document.querySelector('#system-name .value')!.textContent = system.name;\n        document.querySelector('#system-position .value')!.textContent = `${system.position.x} - ${system.position.y}`;\n        document.querySelector('#system-government .value')!.textContent = system.government;\n        document.querySelector('#system-attributes .value')!.textContent = system.attributes.join(', ');\n    }\n\n    buildSystemLinksCache() {\n        this.systemLinksCache = new Set();\n        for (let system of this.esData.starSystems.values()) {\n            for (let linked of system.links) {\n                let linkTxt = `${system.name}___${linked}`;\n                let reverseLinkTxt = `${linked}___${system.name}`;\n\n                if (this.systemLinksCache.has(reverseLinkTxt)) continue;\n\n                this.systemLinksCache.add(linkTxt);\n            }\n        }\n    }\n\n    async preloadGalaxySprites() {\n        for (let galaxy of this.esData.galaxies.values()) {\n            let spriteFile = this.spriteList.sprites.get(galaxy.sprite);\n            if (!spriteFile) continue;\n\n            await this.spriteList.load(galaxy.sprite, spriteFile);\n        }\n    }\n\n    async preRender(ctx: CanvasRenderingContext2D) {\n        if (!this.esData) return;\n\n        // Draw all galaxies\n        if (this.shouldRenderGalaxies) {\n            for (let galaxy of this.esData.galaxies.values()) {\n                await renderGalaxy(galaxy, this.spriteList, ctx);\n            }\n        }\n\n        if (this.shouldRenderLinks) {\n            // Draw all links\n            ctx.lineWidth = PanZoomPlugin.fixedNumber(1, ctx);\n            ctx.strokeStyle = 'rgba(255,255,255,0.2)';\n            for (let link of this.systemLinksCache.values()) {\n                let [originName, targetName] = link.split('___');\n\n                let origin = this.esData.starSystems.get(originName);\n                let target = this.esData.starSystems.get(targetName);\n\n                if (!target || !origin)\n                    continue;\n\n                ctx.beginPath();\n                ctx.moveTo(origin.position.x, origin.position.y);\n\n                ctx.lineTo(target.position.x, target.position.y);\n                ctx.stroke();\n            }\n        }\n\n        if (this.shouldRenderWormholeLinks) {\n            // Draw all links\n            ctx.lineWidth = PanZoomPlugin.fixedNumber(1, ctx);\n            ctx.strokeStyle = 'rgba(100,100,255,0.5)';\n            for (let wormhole of this.esData.wormholes.values()) {\n                if (!wormhole.isMappable && !this.shouldRenderHiddenWormholes) continue;\n\n                for (let link of wormhole.links) {\n                    let [originName, targetName] = link;\n\n                    let origin = this.esData.starSystems.get(originName);\n                    let target = this.esData.starSystems.get(targetName);\n\n                    if (!target || !origin)\n                        continue;\n\n                    ctx.beginPath();\n                    ctx.moveTo(origin.position.x, origin.position.y);\n\n                    ctx.lineTo(target.position.x, target.position.y);\n                    ctx.stroke();\n                }\n            }\n        }\n    }\n\n    render(ctx: CanvasRenderingContext2D) {\n        if (!this.esData) return;\n\n        // Draw all systems\n        for (let system of this.esData.starSystems.values()) {\n            if (this.currentlySelected == system)\n                renderSystemSelection(system, ctx);\n\n            // if (this.shouldRenderLinks) {\n            //     renderSystemLinks(system, ctx);\n            // }\n\n            if (this.shouldRenderDots) {\n                renderSystemPin(system, ctx);\n            }\n\n            if (this.shouldRenderNames) {\n                renderSystemName(system, ctx);\n            }\n        }\n    }\n\n    postRender(ctx: CanvasRenderingContext2D) {\n\n    }\n}\n","import { CanvasLib } from \"@andreadev/canvas-lib\";\nimport { PanZoomPlugin } from \"@andreadev/canvas-lib/dist/modules/pan-zoom-plugin\";\nimport { View } from \"./views/abstract\";\nimport { GalaxyView } from \"./views/galaxy\";\nimport { RenderingEvent } from \"@andreadev/canvas-lib/dist/main\";\nimport { ParsedData } from \"es-data-parser\";\nimport { SpriteList } from \"./game-functions/sprites\";\n\nconst views: Record<string, View | null>= {\n    galaxy: null\n};\nlet currentView: View | null = null;\n\nexport function initCanvasLib(canvas: HTMLCanvasElement) {\n    // Fix canvas dimensions\n    let canvasBCR = canvas.getBoundingClientRect();\n    canvas.width = canvasBCR.width;\n    canvas.height = canvasBCR.height;\n\n    const canvasLib = new CanvasLib(canvas);\n    canvasLib.use(PanZoomPlugin, {});\n\n    // Setup rendering functions for the view\n    const preRender = (event: RenderingEvent) => {\n        currentView?.preRender(event.detail.context);\n    }\n    const render = async (event: RenderingEvent) => {\n        currentView?.render(event.detail.context);\n    }\n    const postRender = async (event: RenderingEvent) => {\n        currentView?.render(event.detail.context);\n    }\n\n    canvasLib.on('prerender', preRender);\n    canvasLib.on('render', render);\n    canvasLib.on('postrender', postRender);\n\n    return canvasLib;\n}\n\nexport async function setCurrentView(view: View) {\n    await currentView?.deactivate();\n    currentView = view;\n    await currentView.activate();\n}\n\nexport async function filesLoaded(lib: CanvasLib, sprites: SpriteList, data: ParsedData) {\n    views.galaxy = new GalaxyView(data, sprites, lib);\n    await setCurrentView(views.galaxy);\n\n    lib.paint();\n}\n","export const openDirectory = async (): Promise<File[]> => {\n    // Use older apis because File System Access API seems to be working unnaturally\n    return new Promise((resolve) => {\n        const input = document.createElement('input');\n        input.type = 'file';\n        input.webkitdirectory = true;\n        \n        input.addEventListener('change', () => {\n            let files = Array.from(input.files as FileList);\n            resolve(files);\n        });\n        if ('showPicker' in HTMLInputElement.prototype) {\n            input.showPicker();\n        } else {\n            input.click();\n        }\n    });\n};\n\n// Probabilmente  qualcosa che andrebbe piuttosto impostato nella libreria CanvasLib.\nexport const throttle = (fn: Function, wait: number = 300) => {\n    let inThrottle: boolean;\n    let lastFn: ReturnType<typeof setTimeout>;\n    let lastTime: number;\n\n    return function (this: any) {\n        const context = this,\n        args = arguments;\n        if (!inThrottle) {\n            fn.apply(context, args);\n            lastTime = Date.now();\n            inThrottle = true;\n        } else {\n            clearTimeout(lastFn);\n            lastFn = setTimeout(() => {\n                if (Date.now() - lastTime >= wait) {\n                    fn.apply(context, args);\n                    lastTime = Date.now();\n                }\n            }, Math.max(wait - (Date.now() - lastTime), 0));\n        }\n    };\n};\n\n// Load image\nexport function loadImage(file: File): Promise<HTMLImageElement> {\n    return new Promise((resolve, reject) => {\n        let img = new Image();\n        img.onload = () => {\n            resolve(img);\n        }\n        img.onerror = () => {\n            reject();\n        }\n        img.src = URL.createObjectURL(file);\n    });\n}\n","import { loadImage } from \"../utils\";\n\nexport class SpriteList {\n    sprites: Map<string, File> = new Map();\n    loadedSprites: Map<string, HTMLImageElement> = new Map();\n\n    constructor() {}\n\n    async load(spriteName: string, file: File) {\n        let img = await loadImage(file);\n        this.loadedSprites.set(spriteName, img);\n        return img;\n    }\n}\n","import { parseFiles } from 'es-data-parser';\nimport { filesLoaded, initCanvasLib } from './scripts/setupCanvasLib';\nimport { openDirectory } from './scripts/utils';\nimport { CanvasLib } from '@andreadev/canvas-lib';\nimport { bindUI } from './scripts/ui';\nimport { SpriteList } from './scripts/game-functions/sprites';\n\nlet lib: CanvasLib | null = null;\n\nasync function initApp() {\n    const filesInfo = await openDirectory();\n\n    const dataFiles = filesInfo.filter(file => file.webkitRelativePath.match(/^([^\\/]*\\/)?data\\//) != null);\n\n    const data = await parseFiles(dataFiles);\n    const sprites = extractSprites(filesInfo);\n\n    let canvas = document.getElementById('viewer') as HTMLCanvasElement;\n\n    lib = initCanvasLib(canvas);\n    \n    filesLoaded(lib, sprites, data);\n\n    bindUI(lib);\n};\n\nfunction extractSprites(files: File[]) {\n    const spriteList = new SpriteList();\n    for (let file of files) {\n        if (file.webkitRelativePath.includes('images/')) {\n            let spriteName = file.webkitRelativePath.split('images/')[1];\n            spriteName = spriteName.replace(/([+\\-~])?\\.\\w+$/, '');\n            spriteList.sprites.set(spriteName, file);\n        }\n    }\n    return spriteList;\n}\n\n// Bind open project button\ndocument.getElementById('select-file')?.addEventListener('click', () => {\n    initApp();\n});\n","import { CanvasLib } from \"@andreadev/canvas-lib\";\nimport { PanZoomPlugin } from \"@andreadev/canvas-lib/dist/modules/pan-zoom-plugin\";\n\n\nexport function bindUI(lib: CanvasLib) {\n    // Setup event listeners for the UI\n    document.getElementById('zoom-in')?.addEventListener('click', () => {\n        const panZoomPlugin = lib.getPlugin(PanZoomPlugin);\n\n        if (!panZoomPlugin) return;\n\n        panZoomPlugin.zoom(0.2);\n    });\n\n    document.getElementById('zoom-out')?.addEventListener('click', () => {\n        const panZoomPlugin = lib.getPlugin(PanZoomPlugin);\n\n        if (!panZoomPlugin) return;\n\n        panZoomPlugin.zoom(-0.2);\n    });\n\n    document.getElementById('viewer')?.addEventListener('pointerdown', (e) => {\n        const panZoomPlugin = lib.getPlugin(PanZoomPlugin);\n\n        if (!panZoomPlugin) return;\n\n        console.log(panZoomPlugin.screenToLocalPoint(e.clientX, e.clientY));\n    })\n}\n"],"names":["Object","defineProperty","$cf4feb574650d713$exports","value","Wormhole","SystemObject","System","Planet","ParsedData","Government","Galaxy","Color","parseFiles","parseFile","$9d3a7279cdd13e71$exports","$fd8083cced5c82f4$exports","constructor","this","galaxies","Map","starSystems","colors","governments","planets","wormholes","addGalaxy","galaxy","set","name","addStarSystem","starSystem","addColor","color","addGovernment","gov","addPlanet","planet","addWormhole","wormhole","$fd89a3ee34d455e6$exports","lex","$d0007d77b5ce0bdd$exports","FileRoot","Line","$d0007d77b5ce0bdd$var$Line","tokens","indentation","children","toString","tokensText","text","token","includes","filename","super","isRoot","data","root","isQuoteOpen","isComment","currentQuote","currentLine","currentToken","parentLevels","i","length","c","nextLine","push","Error","join","slice","$b678679497541d9e$exports","parse","$1f9e811e3d505c17$exports","$8fc71618476cd4d1$exports","$8fc71618476cd4d1$var$SystemObject","esData","distance","period","offset","sprite","objects","static","dataLine","child","parseFloat","fromLine","systemObject","$1f9e811e3d505c17$var$System","pos","x","y","foundPos","links","government","attributes","parseInt","system","isSelected","position","$06805aeeafd6d99e$exports","$06805aeeafd6d99e$var$Galaxy","$add32f04b2a446b5$exports","$add32f04b2a446b5$var$Color","r","g","b","a","_","label","fromPercentages","govName","get","$4a31641ed55e6fa2$exports","$4a31641ed55e6fa2$var$Government","$4352cc84caf8a8f6$exports","$4352cc84caf8a8f6$var$Planet","$febb4e6c99c4498f$exports","$febb4e6c99c4498f$var$Wormhole","isMappable","mappable","previousData","parsedData","async","$9d3a7279cdd13e71$var$parseFile","file","fileContent","$58fb92024830bb66$exports","readFile","Promise","resolve","reader","FileReader","onload","result","readAsText","files","webkitRelativePath","enumerable","$0f55f752fe3cfaec$export$17e8e0f5ce5db525","EventTarget","canvas","plugins","ctx","getContext","context","renderCycle","paint","window","requestAnimationFrame","use","PluginClass","settings","plugin","getPlugin","values","shouldClear","prepareContext","prop","preRender","render","postRender","resetTransform","clearRect","width","height","translate","Math","floor","on","event","callback","addEventListener","startRendering","eventProp","e","CustomEvent","detail","dispatchEvent","$cd2915ddbfd8b047$export$de363e709c412c8a","func","wait","timeout","isThrottled","args","arguments","apply","clearTimeout","setTimeout","$f7e9087d61420905$export$4d5de249200f86f7","app","_a","_b","_c","currentZoom","minZoom","maxZoom","panButton","cameraOffset","isPanning","startedPanningOffset","startedPanningPosition","throttle","bindEvents","throttledPaint","bind","left","middle","right","any","transformCanvas","onPointerDown","onPointerUp","onPointerMove","onScroll","screenToLocalPoint","hw","hh","tx","ty","z","zoom","amount","min","max","updateRender","scale","button","clientX","clientY","deltaY","matrix","scaleX","scaleY","d","translateX","translateY","f","skewX","skewY","number","direction","getDataFromMatrix","getTransform","$26e7e2369f1a689b$var$pinSize","$26e7e2369f1a689b$var$pinLineWidth","$26e7e2369f1a689b$var$tagNameOffset","$26e7e2369f1a689b$var$tagNameColor","$26e7e2369f1a689b$var$tagNameFontSize","$26e7e2369f1a689b$export$cde84772a8df2b55","sqrt","pow","$26e7e2369f1a689b$export$f47381ba8d3300b4","beginPath","fillStyle","strokeStyle","lineWidth","fixedNumber","ellipse","PI","fill","stroke","$26e7e2369f1a689b$export$27a31ba080489ba7","fromGovernment","fixedSize","$26e7e2369f1a689b$export$686ee88157844317","fontSize","font","fillText","$6c4e838e46d8f176$export$a5180499ba1db227","spriteList","spriteImage","loadedSprites","spriteFile","sprites","console","error","load","drawImage","$70d5af9933590103$export$bbb64adae9205aa7","canvasLib","shouldRenderNames","shouldRenderLinks","shouldRenderDots","shouldRenderGalaxies","shouldRenderWormholeLinks","shouldRenderHiddenWormholes","currentlySelected","systemLinksCache","Set","onCanvasClick","document","getElementById","toggleGalaxies","toggleDots","toggleNames","toggleLinks","toggleWormholes","toggleHiddenWormholes","buildSystemLinksCache","preloadGalaxySprites","target","checked","panZoomPlugin","point","closest","closestDistance","minimumDistance","selectSystem","removeSelection","updateStarSystemInfo","querySelector","textContent","linked","linkTxt","reverseLinkTxt","has","add","link","originName","targetName","split","origin","moveTo","lineTo","$a5bb27ff3d01271c$var$views","$a5bb27ff3d01271c$var$currentView","$a5bb27ff3d01271c$export$78cda6c44323997e","canvasBCR","getBoundingClientRect","$a5bb27ff3d01271c$export$c64188370d7959c6","lib","view","deactivate","activate","$a5bb27ff3d01271c$export$f090a900c52a5279","$b25678c505cad7eb$export$942f0b26f9f32b84","input","createElement","type","webkitdirectory","Array","from","HTMLInputElement","prototype","showPicker","click","$b25678c505cad7eb$export$fe58198efe02b173","reject","img","Image","onerror","src","URL","createObjectURL","$90284e86e303b8f3$export$9f3b7a07f9b7bd8d","spriteName","$ad2bcec7a0192558$var$lib","$ad2bcec7a0192558$var$initApp","filesInfo","dataFiles","filter","match","replace","$ad2bcec7a0192558$var$extractSprites","log"],"version":3,"file":"index.00394f8b.js.map"}