{"mappings":"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","sources":["node_modules/@parcel/runtime-browser-hmr/lib/runtime-7f213063644d1015.js","src/main.ts","../es-data-parser/dist/index.js","../es-data-parser/dist/main.js","../es-data-parser/dist/es-objects/ParsedData.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","../es-data-parser/dist/lexer.js","../es-data-parser/dist/structures.js","../es-data-parser/dist/parser.js","../es-data-parser/dist/es-objects/System.js","../es-data-parser/dist/es-objects/SystemObject.js","../es-data-parser/dist/es-objects/Sprite.js","../es-data-parser/dist/es-objects/TravelDistance.js","../es-data-parser/dist/es-objects/RamscoopModifier.js","../es-data-parser/dist/es-objects/Galaxy.js","../es-data-parser/dist/es-objects/Color.js","../es-data-parser/dist/es-objects/Government.js","../es-data-parser/dist/es-objects/Planet.js","../es-data-parser/dist/es-objects/Wormhole.js","../es-data-parser/dist/es-objects/Phrase.js","../es-data-parser/dist/es-objects/Word.js","../es-data-parser/dist/es-objects/Star.js","../es-data-parser/dist/es-objects/Minable.js","../es-data-parser/dist/es-objects/MinablePayload.js","../es-data-parser/dist/utils.js","src/scripts/setupCanvasLib.ts","node_modules/@andreadev/canvas-lib/dist/index.js","node_modules/@andreadev/canvas-lib/dist/main.js","node_modules/@andreadev/custom-event-target/dist/CustomEventTarget.js","node_modules/@andreadev/canvas-lib/dist/modules/pan-zoom-plugin.js","node_modules/@andreadev/canvas-lib/dist/utils.js","src/scripts/views/galaxy.ts","src/scripts/game-functions/system.ts","src/scripts/game-functions/galaxy.ts","src/scripts/utils.ts","src/scripts/views/templates/galaxyTemplates.ts","src/scripts/views/system.ts","src/scripts/game-functions/object.ts","src/scripts/game-functions/sprites.ts","src/scripts/views/templates/systemTemplates.ts","src/scripts/views/missions.ts","src/scripts/views/templates/missionTemplates.ts","src/scripts/ui.ts"],"sourcesContent":["var HMR_HOST = null;var HMR_PORT = null;var HMR_SECURE = false;var HMR_ENV_HASH = \"d6ea1d42532a7575\";module.bundle.HMR_BUNDLE_ID = \"7dd44675b7a05eb9\";\"use strict\";\n\n/* global HMR_HOST, HMR_PORT, HMR_ENV_HASH, HMR_SECURE, chrome, browser, globalThis, __parcel__import__, __parcel__importScripts__, ServiceWorkerGlobalScope */\n\n/*::\nimport type {\n  HMRAsset,\n  HMRMessage,\n} from '@parcel/reporter-dev-server/src/HMRServer.js';\ninterface ParcelRequire {\n  (string): mixed;\n  cache: {|[string]: ParcelModule|};\n  hotData: {|[string]: mixed|};\n  Module: any;\n  parent: ?ParcelRequire;\n  isParcelRequire: true;\n  modules: {|[string]: [Function, {|[string]: string|}]|};\n  HMR_BUNDLE_ID: string;\n  root: ParcelRequire;\n}\ninterface ParcelModule {\n  hot: {|\n    data: mixed,\n    accept(cb: (Function) => void): void,\n    dispose(cb: (mixed) => void): void,\n    // accept(deps: Array<string> | string, cb: (Function) => void): void,\n    // decline(): void,\n    _acceptCallbacks: Array<(Function) => void>,\n    _disposeCallbacks: Array<(mixed) => void>,\n  |};\n}\ninterface ExtensionContext {\n  runtime: {|\n    reload(): void,\n    getURL(url: string): string;\n    getManifest(): {manifest_version: number, ...};\n  |};\n}\ndeclare var module: {bundle: ParcelRequire, ...};\ndeclare var HMR_HOST: string;\ndeclare var HMR_PORT: string;\ndeclare var HMR_ENV_HASH: string;\ndeclare var HMR_SECURE: boolean;\ndeclare var chrome: ExtensionContext;\ndeclare var browser: ExtensionContext;\ndeclare var __parcel__import__: (string) => Promise<void>;\ndeclare var __parcel__importScripts__: (string) => Promise<void>;\ndeclare var globalThis: typeof self;\ndeclare var ServiceWorkerGlobalScope: Object;\n*/\nvar OVERLAY_ID = '__parcel__error__overlay__';\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData[moduleName],\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n  module.bundle.hotData[moduleName] = undefined;\n}\n\nmodule.bundle.Module = Module;\nmodule.bundle.hotData = {};\nvar checkedAssets\n/*: {|[string]: boolean|} */\n, assetsToDispose\n/*: Array<[ParcelRequire, string]> */\n, assetsToAccept\n/*: Array<[ParcelRequire, string]> */\n;\n\nfunction getHostname() {\n  return HMR_HOST || (location.protocol.indexOf('http') === 0 ? location.hostname : 'localhost');\n}\n\nfunction getPort() {\n  return HMR_PORT || location.port;\n} // eslint-disable-next-line no-redeclare\n\n\nvar parent = module.bundle.parent;\n\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = getHostname();\n  var port = getPort();\n  var protocol = HMR_SECURE || location.protocol == 'https:' && !/localhost|127.0.0.1|0.0.0.0/.test(hostname) ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + (port ? ':' + port : '') + '/'); // Web extension context\n\n  var extCtx = typeof chrome === 'undefined' ? typeof browser === 'undefined' ? null : browser : chrome; // Safari doesn't support sourceURL in error stacks.\n  // eval may also be disabled via CSP, so do a quick check.\n\n  var supportsSourceURL = false;\n\n  try {\n    (0, eval)('throw new Error(\"test\"); //# sourceURL=test.js');\n  } catch (err) {\n    supportsSourceURL = err.stack.includes('test.js');\n  } // $FlowFixMe\n\n\n  ws.onmessage = async function (event\n  /*: {data: string, ...} */\n  ) {\n    checkedAssets = {}\n    /*: {|[string]: boolean|} */\n    ;\n    assetsToAccept = [];\n    assetsToDispose = [];\n    var data\n    /*: HMRMessage */\n    = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      // Remove error overlay if there is one\n      if (typeof document !== 'undefined') {\n        removeErrorOverlay();\n      }\n\n      let assets = data.assets.filter(asset => asset.envHash === HMR_ENV_HASH); // Handle HMR Update\n\n      let handled = assets.every(asset => {\n        return asset.type === 'css' || asset.type === 'js' && hmrAcceptCheck(module.bundle.root, asset.id, asset.depsByBundle);\n      });\n\n      if (handled) {\n        console.clear(); // Dispatch custom event so other runtimes (e.g React Refresh) are aware.\n\n        if (typeof window !== 'undefined' && typeof CustomEvent !== 'undefined') {\n          window.dispatchEvent(new CustomEvent('parcelhmraccept'));\n        }\n\n        await hmrApplyUpdates(assets); // Dispose all old assets.\n\n        let processedAssets = {}\n        /*: {|[string]: boolean|} */\n        ;\n\n        for (let i = 0; i < assetsToDispose.length; i++) {\n          let id = assetsToDispose[i][1];\n\n          if (!processedAssets[id]) {\n            hmrDispose(assetsToDispose[i][0], id);\n            processedAssets[id] = true;\n          }\n        } // Run accept callbacks. This will also re-execute other disposed assets in topological order.\n\n\n        processedAssets = {};\n\n        for (let i = 0; i < assetsToAccept.length; i++) {\n          let id = assetsToAccept[i][1];\n\n          if (!processedAssets[id]) {\n            hmrAccept(assetsToAccept[i][0], id);\n            processedAssets[id] = true;\n          }\n        }\n      } else fullReload();\n    }\n\n    if (data.type === 'error') {\n      // Log parcel errors to console\n      for (let ansiDiagnostic of data.diagnostics.ansi) {\n        let stack = ansiDiagnostic.codeframe ? ansiDiagnostic.codeframe : ansiDiagnostic.stack;\n        console.error(' [parcel]: ' + ansiDiagnostic.message + '\\n' + stack + '\\n\\n' + ansiDiagnostic.hints.join('\\n'));\n      }\n\n      if (typeof document !== 'undefined') {\n        // Render the fancy html overlay\n        removeErrorOverlay();\n        var overlay = createErrorOverlay(data.diagnostics.html); // $FlowFixMe\n\n        document.body.appendChild(overlay);\n      }\n    }\n  };\n\n  ws.onerror = function (e) {\n    console.error(e.message);\n  };\n\n  ws.onclose = function () {\n    console.warn('[parcel]  Connection to the HMR server was lost');\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n\n  if (overlay) {\n    overlay.remove();\n    console.log('[parcel]  Error resolved');\n  }\n}\n\nfunction createErrorOverlay(diagnostics) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n  let errorHTML = '<div style=\"background: black; opacity: 0.85; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; font-family: Menlo, Consolas, monospace; z-index: 9999;\">';\n\n  for (let diagnostic of diagnostics) {\n    let stack = diagnostic.frames.length ? diagnostic.frames.reduce((p, frame) => {\n      return `${p}\n<a href=\"/__parcel_launch_editor?file=${encodeURIComponent(frame.location)}\" style=\"text-decoration: underline; color: #888\" onclick=\"fetch(this.href); return false\">${frame.location}</a>\n${frame.code}`;\n    }, '') : diagnostic.stack;\n    errorHTML += `\n      <div>\n        <div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">\n           ${diagnostic.message}\n        </div>\n        <pre>${stack}</pre>\n        <div>\n          ${diagnostic.hints.map(hint => '<div> ' + hint + '</div>').join('')}\n        </div>\n        ${diagnostic.documentation ? `<div> <a style=\"color: violet\" href=\"${diagnostic.documentation}\" target=\"_blank\">Learn more</a></div>` : ''}\n      </div>\n    `;\n  }\n\n  errorHTML += '</div>';\n  overlay.innerHTML = errorHTML;\n  return overlay;\n}\n\nfunction fullReload() {\n  if ('reload' in location) {\n    location.reload();\n  } else if (extCtx && extCtx.runtime && extCtx.runtime.reload) {\n    extCtx.runtime.reload();\n  }\n}\n\nfunction getParents(bundle, id)\n/*: Array<[ParcelRequire, string]> */\n{\n  var modules = bundle.modules;\n\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n\n      if (dep === id || Array.isArray(dep) && dep[dep.length - 1] === id) {\n        parents.push([bundle, k]);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n\n  newLink.onload = function () {\n    if (link.parentNode !== null) {\n      // $FlowFixMe\n      link.parentNode.removeChild(link);\n    }\n  };\n\n  newLink.setAttribute('href', // $FlowFixMe\n  link.getAttribute('href').split('?')[0] + '?' + Date.now()); // $FlowFixMe\n\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\n\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n\n    for (var i = 0; i < links.length; i++) {\n      // $FlowFixMe[incompatible-type]\n      var href\n      /*: string */\n      = links[i].getAttribute('href');\n      var hostname = getHostname();\n      var servedFromHMRServer = hostname === 'localhost' ? new RegExp('^(https?:\\\\/\\\\/(0.0.0.0|127.0.0.1)|localhost):' + getPort()).test(href) : href.indexOf(hostname + ':' + getPort());\n      var absolute = /^https?:\\/\\//i.test(href) && href.indexOf(location.origin) !== 0 && !servedFromHMRServer;\n\n      if (!absolute) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nfunction hmrDownload(asset) {\n  if (asset.type === 'js') {\n    if (typeof document !== 'undefined') {\n      let script = document.createElement('script');\n      script.src = asset.url + '?t=' + Date.now();\n\n      if (asset.outputFormat === 'esmodule') {\n        script.type = 'module';\n      }\n\n      return new Promise((resolve, reject) => {\n        var _document$head;\n\n        script.onload = () => resolve(script);\n\n        script.onerror = reject;\n        (_document$head = document.head) === null || _document$head === void 0 ? void 0 : _document$head.appendChild(script);\n      });\n    } else if (typeof importScripts === 'function') {\n      // Worker scripts\n      if (asset.outputFormat === 'esmodule') {\n        return __parcel__import__(asset.url + '?t=' + Date.now());\n      } else {\n        return new Promise((resolve, reject) => {\n          try {\n            __parcel__importScripts__(asset.url + '?t=' + Date.now());\n\n            resolve();\n          } catch (err) {\n            reject(err);\n          }\n        });\n      }\n    }\n  }\n}\n\nasync function hmrApplyUpdates(assets) {\n  global.parcelHotUpdate = Object.create(null);\n  let scriptsToRemove;\n\n  try {\n    // If sourceURL comments aren't supported in eval, we need to load\n    // the update from the dev server over HTTP so that stack traces\n    // are correct in errors/logs. This is much slower than eval, so\n    // we only do it if needed (currently just Safari).\n    // https://bugs.webkit.org/show_bug.cgi?id=137297\n    // This path is also taken if a CSP disallows eval.\n    if (!supportsSourceURL) {\n      let promises = assets.map(asset => {\n        var _hmrDownload;\n\n        return (_hmrDownload = hmrDownload(asset)) === null || _hmrDownload === void 0 ? void 0 : _hmrDownload.catch(err => {\n          // Web extension bugfix for Chromium\n          // https://bugs.chromium.org/p/chromium/issues/detail?id=1255412#c12\n          if (extCtx && extCtx.runtime && extCtx.runtime.getManifest().manifest_version == 3) {\n            if (typeof ServiceWorkerGlobalScope != 'undefined' && global instanceof ServiceWorkerGlobalScope) {\n              extCtx.runtime.reload();\n              return;\n            }\n\n            asset.url = extCtx.runtime.getURL('/__parcel_hmr_proxy__?url=' + encodeURIComponent(asset.url + '?t=' + Date.now()));\n            return hmrDownload(asset);\n          }\n\n          throw err;\n        });\n      });\n      scriptsToRemove = await Promise.all(promises);\n    }\n\n    assets.forEach(function (asset) {\n      hmrApply(module.bundle.root, asset);\n    });\n  } finally {\n    delete global.parcelHotUpdate;\n\n    if (scriptsToRemove) {\n      scriptsToRemove.forEach(script => {\n        if (script) {\n          var _document$head2;\n\n          (_document$head2 = document.head) === null || _document$head2 === void 0 ? void 0 : _document$head2.removeChild(script);\n        }\n      });\n    }\n  }\n}\n\nfunction hmrApply(bundle\n/*: ParcelRequire */\n, asset\n/*:  HMRAsset */\n) {\n  var modules = bundle.modules;\n\n  if (!modules) {\n    return;\n  }\n\n  if (asset.type === 'css') {\n    reloadCSS();\n  } else if (asset.type === 'js') {\n    let deps = asset.depsByBundle[bundle.HMR_BUNDLE_ID];\n\n    if (deps) {\n      if (modules[asset.id]) {\n        // Remove dependencies that are removed and will become orphaned.\n        // This is necessary so that if the asset is added back again, the cache is gone, and we prevent a full page reload.\n        let oldDeps = modules[asset.id][1];\n\n        for (let dep in oldDeps) {\n          if (!deps[dep] || deps[dep] !== oldDeps[dep]) {\n            let id = oldDeps[dep];\n            let parents = getParents(module.bundle.root, id);\n\n            if (parents.length === 1) {\n              hmrDelete(module.bundle.root, id);\n            }\n          }\n        }\n      }\n\n      if (supportsSourceURL) {\n        // Global eval. We would use `new Function` here but browser\n        // support for source maps is better with eval.\n        (0, eval)(asset.output);\n      } // $FlowFixMe\n\n\n      let fn = global.parcelHotUpdate[asset.id];\n      modules[asset.id] = [fn, deps];\n    } else if (bundle.parent) {\n      hmrApply(bundle.parent, asset);\n    }\n  }\n}\n\nfunction hmrDelete(bundle, id) {\n  let modules = bundle.modules;\n\n  if (!modules) {\n    return;\n  }\n\n  if (modules[id]) {\n    // Collect dependencies that will become orphaned when this module is deleted.\n    let deps = modules[id][1];\n    let orphans = [];\n\n    for (let dep in deps) {\n      let parents = getParents(module.bundle.root, deps[dep]);\n\n      if (parents.length === 1) {\n        orphans.push(deps[dep]);\n      }\n    } // Delete the module. This must be done before deleting dependencies in case of circular dependencies.\n\n\n    delete modules[id];\n    delete bundle.cache[id]; // Now delete the orphans.\n\n    orphans.forEach(id => {\n      hmrDelete(module.bundle.root, id);\n    });\n  } else if (bundle.parent) {\n    hmrDelete(bundle.parent, id);\n  }\n}\n\nfunction hmrAcceptCheck(bundle\n/*: ParcelRequire */\n, id\n/*: string */\n, depsByBundle\n/*: ?{ [string]: { [string]: string } }*/\n) {\n  if (hmrAcceptCheckOne(bundle, id, depsByBundle)) {\n    return true;\n  } // Traverse parents breadth first. All possible ancestries must accept the HMR update, or we'll reload.\n\n\n  let parents = getParents(module.bundle.root, id);\n  let accepted = false;\n\n  while (parents.length > 0) {\n    let v = parents.shift();\n    let a = hmrAcceptCheckOne(v[0], v[1], null);\n\n    if (a) {\n      // If this parent accepts, stop traversing upward, but still consider siblings.\n      accepted = true;\n    } else {\n      // Otherwise, queue the parents in the next level upward.\n      let p = getParents(module.bundle.root, v[1]);\n\n      if (p.length === 0) {\n        // If there are no parents, then we've reached an entry without accepting. Reload.\n        accepted = false;\n        break;\n      }\n\n      parents.push(...p);\n    }\n  }\n\n  return accepted;\n}\n\nfunction hmrAcceptCheckOne(bundle\n/*: ParcelRequire */\n, id\n/*: string */\n, depsByBundle\n/*: ?{ [string]: { [string]: string } }*/\n) {\n  var modules = bundle.modules;\n\n  if (!modules) {\n    return;\n  }\n\n  if (depsByBundle && !depsByBundle[bundle.HMR_BUNDLE_ID]) {\n    // If we reached the root bundle without finding where the asset should go,\n    // there's nothing to do. Mark as \"accepted\" so we don't reload the page.\n    if (!bundle.parent) {\n      return true;\n    }\n\n    return hmrAcceptCheck(bundle.parent, id, depsByBundle);\n  }\n\n  if (checkedAssets[id]) {\n    return true;\n  }\n\n  checkedAssets[id] = true;\n  var cached = bundle.cache[id];\n  assetsToDispose.push([bundle, id]);\n\n  if (!cached || cached.hot && cached.hot._acceptCallbacks.length) {\n    assetsToAccept.push([bundle, id]);\n    return true;\n  }\n}\n\nfunction hmrDispose(bundle\n/*: ParcelRequire */\n, id\n/*: string */\n) {\n  var cached = bundle.cache[id];\n  bundle.hotData[id] = {};\n\n  if (cached && cached.hot) {\n    cached.hot.data = bundle.hotData[id];\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData[id]);\n    });\n  }\n\n  delete bundle.cache[id];\n}\n\nfunction hmrAccept(bundle\n/*: ParcelRequire */\n, id\n/*: string */\n) {\n  // Execute the module.\n  bundle(id); // Run the accept callbacks in the new version of the module.\n\n  var cached = bundle.cache[id];\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      var assetsToAlsoAccept = cb(function () {\n        return getParents(module.bundle.root, id);\n      });\n\n      if (assetsToAlsoAccept && assetsToAccept.length) {\n        assetsToAlsoAccept.forEach(function (a) {\n          hmrDispose(a[0], a[1]);\n        }); // $FlowFixMe[method-unbinding]\n\n        assetsToAccept.push.apply(assetsToAccept, assetsToAlsoAccept);\n      }\n    });\n  }\n}","import { parseFiles } from 'es-data-parser';\nimport { filesLoaded, initCanvasLib } from './scripts/setupCanvasLib';\nimport { openDirectory } from './scripts/utils';\nimport { CanvasLib } from '@andreadev/canvas-lib';\nimport { bindUI } from './scripts/ui';\nimport { SpriteList } from './scripts/game-functions/sprites';\n\nlet lib: CanvasLib | null = null;\n\nasync function initApp() {\n    const filesInfo = await openDirectory();\n\n    const dataFiles = filesInfo.filter(file => file.webkitRelativePath.match(/^([^\\/]*\\/)?data\\//) != null);\n\n    const data = await parseFiles(dataFiles);\n    const sprites = extractSprites(filesInfo);\n\n    let canvas = document.getElementById('viewer') as HTMLCanvasElement;\n\n    lib = initCanvasLib(canvas);\n    \n    filesLoaded(lib, sprites, data);\n\n    bindUI(lib, data);\n};\n\nfunction extractSprites(files: File[]) {\n    const spriteList = new SpriteList();\n    for (let file of files) {\n        if (file.webkitRelativePath.includes('images/')) {\n            let spriteName = file.webkitRelativePath.split('images/')[1];\n            spriteName = spriteName.replace(/([+\\-~])?\\.\\w+$/, '');\n            spriteList.sprites.set(spriteName, file);\n        }\n    }\n    return spriteList;\n}\n\n// Bind open project button\ndocument.getElementById('select-file')?.addEventListener('click', () => {\n    initApp();\n});\n","export { parseFile, parseFiles } from './main';\nexport { Color } from './es-objects/Color';\nexport { Galaxy } from './es-objects/Galaxy';\nexport { Government } from './es-objects/Government';\nexport { ParsedData } from './es-objects/ParsedData';\nexport { Planet } from './es-objects/Planet';\nexport { System } from './es-objects/System';\nexport { SystemObject } from './es-objects/SystemObject';\nexport { Wormhole } from './es-objects/Wormhole';\n","// import { parse } from \"./parser\";\nimport { ParsedData } from \"./es-objects/ParsedData\";\nimport { lex } from \"./lexer\";\nimport { parse } from \"./parser\";\nimport { readFile } from \"./utils\";\nexport async function parseFile(file, filename, previousData) {\n    const parsedData = previousData !== null && previousData !== void 0 ? previousData : new ParsedData();\n    let fileContent = await readFile(file);\n    let data = lex(fileContent, filename);\n    parse(data, parsedData);\n    return parsedData;\n}\nexport async function parseFiles(files) {\n    const parsedData = new ParsedData();\n    for (let file of files) {\n        await parseFile(file, file.webkitRelativePath, parsedData);\n    }\n    return parsedData;\n}\n","export class ParsedData {\n    constructor() {\n        this.galaxies = new Map();\n        this.starSystems = new Map();\n        this.colors = new Map();\n        this.governments = new Map();\n        this.planets = new Map();\n        this.wormholes = new Map();\n        this.phrases = new Map();\n        this.starAttributes = new Map();\n        this.minables = new Map();\n    }\n    addGalaxy(galaxy) {\n        this.galaxies.set(galaxy.name, galaxy);\n    }\n    addStarSystem(starSystem) {\n        this.starSystems.set(starSystem.name, starSystem);\n    }\n    addColor(color) {\n        this.colors.set(color.name, color);\n    }\n    addGovernment(gov) {\n        this.governments.set(gov.name, gov);\n    }\n    addPlanet(planet) {\n        this.planets.set(planet.name, planet);\n    }\n    addWormhole(wormhole) {\n        this.wormholes.set(wormhole.name, wormhole);\n    }\n    addPhrase(phrase) {\n        if (this.phrases.has(phrase.name)) {\n            this.phrases.get(phrase.name).push(phrase);\n        }\n        else {\n            this.phrases.set(phrase.name, [phrase]);\n        }\n    }\n    addStarAttribute(star) {\n        this.starAttributes.set(star.name, star);\n    }\n    addMinable(minable) {\n        this.minables.set(minable.name, minable);\n    }\n}\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (key === 'default' || key === '__esModule' || dest.hasOwnProperty(key)) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","import { Line, FileRoot } from \"./structures\";\nexport function lex(data, filename = \"\") {\n    const root = new FileRoot([], 0, filename);\n    let isQuoteOpen = false;\n    let isComment = false;\n    let currentQuote = \"\";\n    let currentLine = new Line([], 0);\n    let currentToken = \"\";\n    let parentLevels = [root];\n    for (let i = 0; i < data.length; i++) {\n        const c = data[i];\n        let nextLine = null;\n        if (isComment && c != '\\n')\n            continue;\n        switch (c) {\n            // handle comments\n            case '#':\n                if (currentToken.length == 0 && !isQuoteOpen) {\n                    isComment = true;\n                }\n                break;\n            // handle quotes\n            case '\"':\n            case '`':\n                if (isQuoteOpen && c == currentQuote) {\n                    isQuoteOpen = false;\n                    if (currentToken.length == 0) {\n                        currentLine.tokens.push('');\n                    }\n                    break;\n                }\n                if (!isQuoteOpen && currentToken.length == 0) {\n                    isQuoteOpen = true;\n                    currentQuote = c;\n                    break;\n                }\n                if (!isQuoteOpen) {\n                    throw new Error(`Unescaped quote in string after ${currentToken}`);\n                }\n                break;\n            // handle newlines\n            case '\\n':\n                if (currentToken != '' && !isComment) {\n                    currentLine.tokens.push(currentToken);\n                }\n                currentToken = '';\n                isComment = false;\n                nextLine = new Line([], 0);\n                // ignore blank lines\n                if (currentLine.tokens.length == 0) {\n                    currentLine = nextLine;\n                    continue;\n                }\n                // handle too much indentation\n                if (currentLine.indentation > parentLevels.length - 1) {\n                    throw new Error(`Unexpected indentation for line ${currentLine.tokens.join(' ')}`);\n                }\n                // adding the line as children to its parent based on indentation\n                if (currentLine.indentation >= 0) {\n                    parentLevels[currentLine.indentation].children.push(currentLine);\n                }\n                // adding new line as parent level for following data\n                if (currentLine.indentation == parentLevels.length - 1) {\n                    parentLevels.push(currentLine);\n                }\n                else {\n                    // if indentation is smaller then the number of parents, it means that\n                    // previous deeper nested parents has ended their block, so we delete them\n                    parentLevels = parentLevels.slice(0, currentLine.indentation + 1);\n                    parentLevels.push(currentLine);\n                }\n                if (isQuoteOpen) {\n                    throw new Error(`A quote was left open near: '${currentToken}'`);\n                }\n                currentLine = nextLine;\n                break;\n            // handle spaces\n            case ' ':\n                if (!isQuoteOpen) {\n                    if (currentToken.length > 0) {\n                        currentLine.tokens.push(currentToken);\n                        currentToken = \"\";\n                    }\n                }\n                else {\n                    currentToken += \" \";\n                }\n                break;\n            // handle tabs\n            case '\\t':\n                if (!isQuoteOpen &&\n                    currentLine.tokens.length == 0 &&\n                    currentToken.length == 0) {\n                    currentLine.indentation++;\n                }\n                else if (!isQuoteOpen && currentToken.length > 0) {\n                    // Add tabs as token separators too to avoid the error in some official files\n                    currentLine.tokens.push(currentToken);\n                    currentToken = \"\";\n                }\n                else {\n                    currentToken += \"\\t\";\n                }\n                break;\n            // handle other characters\n            default:\n                currentToken += c;\n        }\n    }\n    return root;\n}\n","export class Line {\n    constructor(tokens, indentation) {\n        this.tokens = tokens;\n        this.indentation = indentation;\n        this.children = [];\n    }\n    toString() {\n        const tokensText = [...this.tokens];\n        let text = \"\";\n        for (const token of tokensText) {\n            if (token.includes(' ')) {\n                if (token.includes('\"')) {\n                    text += \"`\" + token + \"`\";\n                }\n                else {\n                    text += `\"${token}\"`;\n                }\n            }\n            else {\n                text += token + \" \";\n            }\n        }\n        return text;\n    }\n}\nexport class FileRoot extends Line {\n    constructor(tokens, indentation, filename) {\n        super(tokens, indentation);\n        this.tokens = tokens;\n        this.indentation = indentation;\n        this.isRoot = true;\n        this.filename = filename;\n    }\n}\n","import { ParsedData } from \"./es-objects/ParsedData\";\nimport { System } from \"./es-objects/System\";\nimport { Galaxy } from \"./es-objects/Galaxy\";\nimport { Color } from \"./es-objects/Color\";\nimport { Government } from \"./es-objects/Government\";\nimport { Planet } from \"./es-objects/Planet\";\nimport { Wormhole } from \"./es-objects/Wormhole\";\nimport { Phrase } from \"./es-objects/Phrase\";\nimport { Star } from \"./es-objects/Star\";\nimport { Minable } from \"./es-objects/Minable\";\nexport function parse(root, previousData = null) {\n    const parsedData = previousData !== null && previousData !== void 0 ? previousData : new ParsedData();\n    const unparsed = new Set();\n    for (let child of root.children) {\n        switch (child.tokens[0]) {\n            case 'system':\n                parsedData.addStarSystem(System.fromLine(parsedData, child));\n                break;\n            case 'galaxy':\n                parsedData.addGalaxy(Galaxy.fromLine(parsedData, child));\n                break;\n            case 'color':\n                parsedData.addColor(Color.fromLine(parsedData, child));\n                break;\n            case 'government':\n                parsedData.addGovernment(Government.fromLine(parsedData, child));\n                break;\n            case 'planet':\n                parsedData.addPlanet(Planet.fromLine(parsedData, child));\n                break;\n            case 'wormhole':\n                parsedData.addWormhole(Wormhole.fromLine(parsedData, child));\n                break;\n            case 'phrase':\n                parsedData.addPhrase(Phrase.fromLine(parsedData, child));\n                break;\n            case 'star':\n                parsedData.addStarAttribute(Star.fromLine(parsedData, child));\n                break;\n            case 'minable':\n                parsedData.addMinable(Minable.fromLine(parsedData, child));\n                break;\n            default:\n                unparsed.add(child.tokens[0]);\n        }\n    }\n    return parsedData;\n}\n","import { SystemObject } from \"./SystemObject\";\nimport { TravelDistance } from \"./TravelDistance\";\nimport { RamscoopModifier } from \"./RamscoopModifier\";\nexport class System {\n    constructor(data, name, pos) {\n        this.links = [];\n        this.government = \"\";\n        this.attributes = [];\n        this.objects = [];\n        this.inaccessible = false;\n        this.hidden = false;\n        this.shrouded = false;\n        this.music = \"\";\n        this.arrival = new TravelDistance();\n        this.departure = new TravelDistance();\n        this.ramscoop = new RamscoopModifier();\n        this.habitable = 0;\n        this.belt = { distance: 0, weight: 1 };\n        this.invisibleFence = 10000;\n        this.jumpRange = 0;\n        this.haze = \"\";\n        this.asteroids = [];\n        this.minables = [];\n        this.trades = [];\n        this.fleets = [];\n        this.raids = [];\n        this.noRaid = false;\n        this.hazards = [];\n        this.starfieldDensity = 1;\n        this.isSelected = false;\n        this.name = name;\n        this.position = pos;\n        this.esData = data;\n    }\n    static fromLine(data, dataLine) {\n        if (dataLine.tokens[0] != 'system') {\n            throw new Error(\"Not a system\");\n        }\n        const name = dataLine.tokens[1];\n        const system = new System(data, name, { x: 0, y: 0 });\n        let foundPos = false;\n        let links = [];\n        const objects = [];\n        let asteroids = [];\n        let minables = [];\n        let trades = [];\n        let fleets = [];\n        let raids = [];\n        let hazards = [];\n        for (let child of dataLine.children) {\n            switch (child.tokens[0]) {\n                // Extract the position\n                case 'pos':\n                    system.position = {\n                        x: parseInt(child.tokens[1]),\n                        y: parseInt(child.tokens[2])\n                    };\n                    foundPos = true;\n                    break;\n                // Extract the links\n                case 'link':\n                    links.push(child.tokens[1]);\n                    break;\n                // Set the system government\n                case 'government':\n                    system.government = child.tokens[1];\n                    break;\n                // Save a list of attributes\n                case 'attributes':\n                    system.attributes = child.tokens.slice(1);\n                    break;\n                // Parse the objects in the system\n                case 'object':\n                    objects.push(SystemObject.fromLine(data, child));\n                    break;\n                // Parse the arrival distance\n                case 'arrival':\n                    system.arrival = TravelDistance.fromLine(data, child);\n                    break;\n                // Parse the departure distance\n                case 'departure':\n                    system.departure = TravelDistance.fromLine(data, child);\n                    break;\n                // Inaccessible system\n                case 'inaccessible':\n                    system.inaccessible = true;\n                    break;\n                // Hidden system\n                case 'hidden':\n                    system.hidden = true;\n                    break;\n                // Shrouded system\n                case 'shrouded':\n                    system.shrouded = true;\n                    break;\n                // Music for this specific system\n                case 'music':\n                    system.music = child.tokens[1];\n                    break;\n                // Changes to how the ramscoop works in this system\n                case 'ramscoop':\n                    system.ramscoop = RamscoopModifier.fromLine(data, child);\n                    break;\n                // Habitable zone\n                case 'habitable':\n                    system.habitable = parseInt(child.tokens[1]);\n                    break;\n                // Data for the asteroid belt\n                case 'belt':\n                    system.belt = {\n                        distance: parseInt(child.tokens[1]),\n                        weight: (child.tokens[2])\n                            ? parseFloat(child.tokens[2])\n                            : 1\n                    };\n                    break;\n                // Invisible fence distance for the NPCs\n                case 'invisible fence':\n                    system.invisibleFence = parseInt(child.tokens[1]);\n                    break;\n                // Jump range\n                case 'jump range':\n                    system.jumpRange = parseInt(child.tokens[1]);\n                    break;\n                // Haze sprite\n                case 'haze':\n                    system.haze = child.tokens[1];\n                    break;\n                // Asteroid type data\n                case 'asteroids':\n                    asteroids.push({\n                        name: child.tokens[1],\n                        count: parseInt(child.tokens[2]),\n                        energy: parseFloat(child.tokens[3])\n                    });\n                    break;\n                // Mineable type data\n                case 'minables':\n                    minables.push({\n                        name: child.tokens[1],\n                        count: parseInt(child.tokens[2]),\n                        energy: parseFloat(child.tokens[3])\n                    });\n                    break;\n                // Trade info\n                case 'trade':\n                    trades.push({\n                        commodity: child.tokens[1],\n                        cost: parseInt(child.tokens[2])\n                    });\n                    break;\n                // Fleets that will spawn\n                case 'fleet':\n                    fleets.push({\n                        name: child.tokens[1],\n                        period: parseInt(child.tokens[2])\n                    });\n                    break;\n                // Raids coming into the system\n                case 'raid':\n                    raids.push({\n                        fleet: child.tokens[1],\n                        minAttraction: parseInt(child.tokens[2]),\n                        maxAttraction: parseInt(child.tokens[3])\n                    });\n                    break;\n                case 'no raid':\n                    system.noRaid = true;\n                    break;\n                // Hazards present in the system\n                case 'hazard':\n                    hazards.push({\n                        name: child.tokens[1],\n                        period: parseInt(child.tokens[2])\n                    });\n                    break;\n                // Density of the stars in the background\n                case 'starfield density':\n                    system.starfieldDensity = parseFloat(child.tokens[1]);\n                    break;\n            }\n        }\n        if (!foundPos) {\n            throw new Error(\"No position found for this system\");\n        }\n        system.links = links;\n        system.objects = objects;\n        system.asteroids = asteroids;\n        system.minables = minables;\n        system.trades = trades;\n        system.fleets = fleets;\n        system.raids = raids;\n        system.hazards = hazards;\n        return system;\n    }\n}\n","import { Sprite } from \"./Sprite\";\nexport class SystemObject {\n    constructor(esData) {\n        this.esData = esData;\n        this.name = \"\";\n        this.sprite = null;\n        this.distance = 0;\n        this.period = 0;\n        this.offset = 0;\n        this.objects = [];\n    }\n    static fromLine(data, dataLine) {\n        if (dataLine.tokens[0] != 'object') {\n            throw new Error(\"Not an object\");\n        }\n        const systemObject = new SystemObject(data);\n        systemObject.name = (dataLine.tokens.length == 2) ? dataLine.tokens[1] : \"\";\n        const objects = [];\n        for (let child of dataLine.children) {\n            switch (child.tokens[0]) {\n                case 'sprite':\n                    systemObject.sprite = Sprite.fromLine(data, child);\n                    break;\n                case 'distance':\n                    systemObject.distance = parseFloat(child.tokens[1]);\n                    break;\n                case 'period':\n                    systemObject.period = parseFloat(child.tokens[1]);\n                    break;\n                case 'offset':\n                    systemObject.offset = parseInt(child.tokens[1]);\n                    break;\n                case 'object':\n                    objects.push(SystemObject.fromLine(data, child));\n            }\n        }\n        systemObject.objects = objects;\n        return systemObject;\n    }\n}\n","export class Sprite {\n    constructor() {\n        this.name = \"\";\n        this.scale = 1;\n    }\n    static fromLine(data, dataLine) {\n        if (dataLine.tokens[0] != 'sprite') {\n            throw new Error('Not a sprite');\n        }\n        let sprite = new Sprite();\n        sprite.name = dataLine.tokens[1];\n        // check if there's a scaling for the sprite\n        if (dataLine.children.length > 0) {\n            if (dataLine.children[0].tokens[0] == 'scale') {\n                sprite.scale = parseFloat(dataLine.children[0].tokens[1]);\n            }\n        }\n        return sprite;\n    }\n}\n","export class TravelDistance {\n    constructor() {\n        this.link = 0;\n        this.jump = 0;\n    }\n    static fromLine(data, dataLine) {\n        if (dataLine.tokens[0] != 'arrival' &&\n            dataLine.tokens[0] != 'departure') {\n            throw new Error(\"Not a travel distance (either 'arrival' or 'departure')\");\n        }\n        let link = 0;\n        let jump = 0;\n        if (dataLine.tokens[1]) {\n            link = jump = parseInt(dataLine.tokens[1]);\n        }\n        for (let child of dataLine.children) {\n            switch (child.tokens[0]) {\n                // Extract link distance\n                case 'link':\n                    link = parseInt(child.tokens[1]);\n                    break;\n                // Extract jump distance\n                case 'jump':\n                    jump = parseInt(child.tokens[1]);\n                    break;\n            }\n        }\n        const distance = new TravelDistance();\n        distance.link = link;\n        distance.jump = jump;\n        return distance;\n    }\n}\n","export class RamscoopModifier {\n    constructor() {\n        this.universal = 1;\n        this.addend = 0;\n        this.multiplier = 1;\n    }\n    static fromLine(data, dataLine) {\n        if (dataLine.tokens[0] != 'ramscoop') {\n            throw new Error(\"Not a ramscoop data\");\n        }\n        let universal = 1;\n        let addend = 0;\n        let multiplier = 1;\n        for (let child of dataLine.children) {\n            switch (child.tokens[0]) {\n                case 'universal':\n                    universal = parseFloat(child.tokens[1]);\n                    break;\n                case 'addend':\n                    addend = parseFloat(child.tokens[1]);\n                    break;\n                case 'multiplier':\n                    multiplier = parseFloat(child.tokens[1]);\n                    break;\n            }\n        }\n        const ramscoop = new RamscoopModifier();\n        ramscoop.universal = universal;\n        ramscoop.addend = addend;\n        ramscoop.multiplier = multiplier;\n        return ramscoop;\n    }\n}\n","export class Galaxy {\n    constructor(data, name, pos) {\n        this.position = { x: 0, y: 0 };\n        this.sprite = \"\";\n        this.name = name;\n        this.position = pos;\n        this.esData = data;\n    }\n    static fromLine(data, dataLine) {\n        if (dataLine.tokens[0] != 'galaxy') {\n            throw new Error(\"Not a galaxy\");\n        }\n        const name = dataLine.tokens[1];\n        let pos = { x: 0, y: 0 };\n        let foundPos = false;\n        let sprite = \"\";\n        for (let child of dataLine.children) {\n            if (child.tokens[0] == 'pos') {\n                pos = {\n                    x: parseInt(child.tokens[1]),\n                    y: parseInt(child.tokens[2])\n                };\n                foundPos = true;\n                continue;\n            }\n            if (child.tokens[0] == 'sprite') {\n                sprite = child.tokens[1];\n            }\n        }\n        if (!foundPos) {\n            throw new Error(\"No position found for this system\");\n        }\n        const galaxy = new Galaxy(data, name, pos);\n        galaxy.sprite = sprite;\n        return galaxy;\n    }\n}\n","export class Color {\n    constructor(name, r, g, b, a = 255) {\n        this.name = name;\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n    }\n    toString() {\n        if (this.a == 255) {\n            return `rgb(${this.r}, ${this.g}, ${this.b})`;\n        }\n        return `rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`;\n    }\n    // The first argument is important to allow standardization across the different game objects\n    static fromLine(_, dataLine) {\n        let label = dataLine.tokens[1];\n        let r = parseFloat(dataLine.tokens[2]);\n        let g = parseFloat(dataLine.tokens[3]);\n        let b = parseFloat(dataLine.tokens[4]);\n        let a = 255;\n        if (dataLine.tokens.length == 6) {\n            a = parseFloat(dataLine.tokens[5]);\n        }\n        return Color.fromPercentages(label, r, g, b, a);\n    }\n    static fromPercentages(label, r, g, b, a) {\n        return new Color(label, r * 255, g * 255, b * 255, a * 255);\n    }\n    static fromGovernment(data, govName) {\n        let government = data.governments.get(govName);\n        if (!government) {\n            return null;\n        }\n        if (government.color instanceof Color) {\n            return government.color;\n        }\n        let color = data.colors.get(government.color);\n        if (!color) {\n            return null;\n        }\n        return color;\n    }\n}\n","import { Color } from \"./Color\";\nexport class Government {\n    constructor(data, name) {\n        this.color = \"\";\n        this.esData = data;\n        this.name = name;\n    }\n    static fromLine(data, dataLine) {\n        if (dataLine.tokens[0] != 'government') {\n            throw new Error(\"Not a government\");\n        }\n        const name = dataLine.tokens[1];\n        let color = \"\";\n        for (let child of dataLine.children) {\n            if (child.tokens[0] == 'color') {\n                if (child.tokens.length == 2) {\n                    color = child.tokens[1];\n                }\n                else {\n                    let r = parseFloat(dataLine.tokens[1]);\n                    let g = parseFloat(dataLine.tokens[2]);\n                    let b = parseFloat(dataLine.tokens[3]);\n                    let a = 255;\n                    if (dataLine.tokens.length == 5) {\n                        a = parseFloat(dataLine.tokens[4]);\n                    }\n                    color = Color.fromPercentages('', r, g, b, a);\n                }\n            }\n        }\n        const government = new Government(data, name);\n        government.color = color;\n        return government;\n    }\n}\n","export class Planet {\n    constructor(esData, name) {\n        this.esData = esData;\n        this.name = name;\n        this.wormhole = \"\";\n    }\n    static fromLine(data, dataLine) {\n        if (dataLine.tokens[0] != 'planet') {\n            throw new Error(\"Not a planet\");\n        }\n        const name = dataLine.tokens[1];\n        let wormhole = \"\";\n        for (let child of dataLine.children) {\n            if (child.tokens[0] == 'wormhole') {\n                wormhole = child.tokens[1];\n            }\n        }\n        let planet = new Planet(data, name);\n        planet.wormhole = wormhole;\n        return planet;\n    }\n}\n","import { Color } from \"./Color\";\nexport class Wormhole {\n    constructor(esData, name) {\n        this.esData = esData;\n        this.name = name;\n        this.isMappable = false;\n        this.links = [];\n        this.color = \"\";\n    }\n    static fromLine(data, dataLine) {\n        if (dataLine.tokens[0] != 'wormhole') {\n            throw new Error(\"Not a wormhole\");\n        }\n        const name = dataLine.tokens[1];\n        let mappable = false;\n        let color = \"\";\n        let links = [];\n        for (let child of dataLine.children) {\n            switch (child.tokens[0]) {\n                case 'color':\n                    if (child.tokens.length == 2) {\n                        color = child.tokens[1];\n                    }\n                    else {\n                        let r = parseFloat(dataLine.tokens[1]);\n                        let g = parseFloat(dataLine.tokens[2]);\n                        let b = parseFloat(dataLine.tokens[3]);\n                        let a = 255;\n                        if (dataLine.tokens.length == 5) {\n                            a = parseFloat(dataLine.tokens[4]);\n                        }\n                        color = Color.fromPercentages('', r, g, b, a);\n                    }\n                    break;\n                case 'link':\n                    links.push([child.tokens[1], child.tokens[2]]);\n                    break;\n                case 'mappable':\n                    mappable = true;\n                    break;\n            }\n        }\n        const wormhole = new Wormhole(data, name);\n        wormhole.isMappable = mappable;\n        wormhole.color = color;\n        wormhole.links = links;\n        return wormhole;\n    }\n}\n","import { Word } from \"./Word\";\nexport class Phrase {\n    constructor() {\n        this.name = \"\";\n        this.pieces = [];\n        this.replacements = [];\n    }\n    static fromLine(data, dataLine) {\n        var _a;\n        if (dataLine.tokens[0] != 'phrase') {\n            throw new Error(\"Not a phrase\");\n        }\n        let phrase = new Phrase();\n        phrase.name = (_a = dataLine.tokens[1]) !== null && _a !== void 0 ? _a : \"\";\n        let pieces = [];\n        let replacements = [];\n        for (let child of dataLine.children) {\n            switch (child.tokens[0]) {\n                case 'word':\n                    pieces.push(Word.fromLine(data, child));\n                    break;\n                case 'phrase':\n                    pieces.push(this.phrasesNamesFromLine(child));\n                    break;\n                case 'replacements':\n                    replacements = this.replacementsFromLine(child);\n                    break;\n            }\n        }\n        phrase.pieces = pieces;\n        phrase.replacements = replacements;\n        return phrase;\n    }\n    static phrasesNamesFromLine(dataLine) {\n        let names;\n        names = dataLine.children.map((line) => {\n            var _a;\n            return ({\n                data: line.tokens[0],\n                weight: parseInt((_a = line.tokens[1]) !== null && _a !== void 0 ? _a : 1)\n            });\n        });\n        return names;\n    }\n    static replacementsFromLine(dataLine) {\n        let replacements;\n        replacements = dataLine.children.map((line) => {\n            let from = line.tokens[0];\n            let to = line.tokens[1];\n            return [from, to];\n        });\n        return replacements;\n    }\n}\n","export class Word {\n    constructor() {\n        this.texts = [];\n    }\n    static fromLine(data, dataLine) {\n        var _a;\n        if (dataLine.tokens[0] != 'word') {\n            throw new Error(\"Not a word\");\n        }\n        let texts = [];\n        for (let child of dataLine.children) {\n            texts.push({\n                data: child.tokens[0],\n                weight: parseInt((_a = child.tokens[1]) !== null && _a !== void 0 ? _a : 1)\n            });\n        }\n        let wordObj = new Word();\n        wordObj.texts = texts;\n        return wordObj;\n    }\n}\n","export class Star {\n    constructor() {\n        this.name = \"\";\n        this.power = 1;\n        this.wind = 1;\n    }\n    static fromLine(data, dataLine) {\n        if (dataLine.tokens[0] != 'star') {\n            throw new Error('Not a star');\n        }\n        let star = new Star();\n        star.name = dataLine.tokens[1];\n        for (let child of dataLine.children) {\n            switch (child.tokens[0]) {\n                case 'power':\n                    star.power = parseFloat(child.tokens[1]);\n                    break;\n                case 'wind':\n                    star.wind = parseFloat(child.tokens[1]);\n                    break;\n            }\n        }\n        return star;\n    }\n}\n","import { MinablePayload } from \"./MinablePayload\";\nexport class Minable {\n    constructor() {\n        this.name = \"\";\n        this.displayName = \"\";\n        this.noun = \"Asteroid\";\n        this.sprite = \"\";\n        this.hull = 0;\n        this.randomHull = 0;\n        this.payloads = [];\n        this.explosions = [];\n    }\n    static fromLine(data, dataLine) {\n        var _a;\n        if (dataLine.tokens[0] != 'minable') {\n            throw new Error('Not a minable');\n        }\n        let minable = new Minable();\n        minable.name = dataLine.tokens[1];\n        minable.displayName = minable.name;\n        let payloads = [];\n        let explosions = [];\n        for (let child of dataLine.children) {\n            switch (child.tokens[0]) {\n                case 'display name':\n                    minable.displayName = child.tokens[1];\n                    break;\n                case 'noun':\n                    minable.noun = child.tokens[1];\n                    break;\n                case 'sprite':\n                    minable.sprite = child.tokens[1];\n                    break;\n                case 'hull':\n                    minable.hull = parseInt(child.tokens[1]);\n                    break;\n                case 'random hull':\n                    minable.randomHull = parseInt(child.tokens[1]);\n                    break;\n                case 'payload':\n                    payloads.push(MinablePayload.fromLine(data, child));\n                    break;\n                case 'explode':\n                    explosions.push({\n                        effect: child.tokens[1],\n                        count: parseInt((_a = child.tokens[2]) !== null && _a !== void 0 ? _a : 1)\n                    });\n                    break;\n            }\n        }\n        minable.payloads = payloads;\n        minable.explosions = explosions;\n        return minable;\n    }\n}\n","export class MinablePayload {\n    constructor() {\n        this.outfit = \"\";\n        this.maxDrops = 1;\n        this.dropRate = 0.25;\n        this.toughness = 1;\n    }\n    static fromLine(data, dataLine) {\n        if (dataLine.tokens[0] != 'payload') {\n            throw new Error('Not a payload');\n        }\n        let payload = new MinablePayload();\n        payload.outfit = dataLine.tokens[1];\n        if (dataLine.tokens[2]) {\n            payload.maxDrops = parseInt(dataLine.tokens[2]);\n        }\n        for (let child of dataLine.children) {\n            switch (child.tokens[0]) {\n                case 'max drops':\n                    payload.maxDrops = parseInt(child.tokens[1]);\n                    break;\n                case 'drop rate':\n                    payload.dropRate = parseFloat(child.tokens[1]);\n                    break;\n                case 'toughness':\n                    payload.toughness = parseInt(child.tokens[1]);\n                    break;\n            }\n        }\n        return payload;\n    }\n}\n","export function readFile(file) {\n    return new Promise((resolve, _) => {\n        const reader = new FileReader();\n        reader.onload = () => {\n            resolve(reader.result);\n        };\n        reader.readAsText(file);\n    });\n}\n","import { CanvasLib } from \"@andreadev/canvas-lib\";\nimport { PanZoomPlugin } from \"@andreadev/canvas-lib/dist/modules/pan-zoom-plugin\";\nimport { View } from \"./views/abstract\";\nimport { GalaxyView } from \"./views/galaxy\";\nimport { SystemView } from \"./views/system\";\nimport { ParsedData } from \"es-data-parser\";\nimport { SpriteList } from \"./game-functions/sprites\";\nimport { MissionsView } from \"./views/missions\";\n\nconst views: Record<string, View | null>= {\n    galaxy: null,\n    system: null,\n    missions: null,\n};\nlet currentView: View | null = null;\n\nexport function initCanvasLib(canvas: HTMLCanvasElement) {\n    // Fix canvas dimensions\n    let canvasBCR = canvas.getBoundingClientRect();\n    canvas.width = canvasBCR.width;\n    canvas.height = canvasBCR.height;\n\n    const canvasLib = new CanvasLib(canvas);\n    canvasLib.use(PanZoomPlugin, {});\n\n    return canvasLib;\n}\n\nexport async function setCurrentView(lib: CanvasLib, viewName: string) {\n    if (!(viewName in views)) {\n        throw new Error(`'${viewName}' is not a valid view.`);\n    }\n\n    for (let name of Object.keys(views)) {\n        document.body.classList.remove(`active-${name}`);\n    }\n    document.body.classList.add(`active-${viewName}`);\n\n    let view = views[viewName]!;\n\n    // Deactivate the previous view\n    await currentView?.deactivate(lib);\n\n    // Reset zoom and panning\n    let panZoomPlug = lib.getPlugin(PanZoomPlugin)!;\n    panZoomPlug.currentZoom = 1;\n    panZoomPlug.cameraOffset = {x: 0, y: 0};\n\n    // Set the new view\n    currentView = view;\n    await currentView.activate(lib);\n\n    await lib.paint();\n}\n\nexport async function filesLoaded(lib: CanvasLib, sprites: SpriteList, data: ParsedData) {\n    views.system = views.system ?? new SystemView(data, sprites, lib);\n    views.galaxy = views.galaxy ?? new GalaxyView(data, sprites, lib);\n    views.missions = views.missions ?? new MissionsView(data, sprites, lib);\n\n    await setCurrentView(lib, 'galaxy');\n\n    await lib.paint();\n}\n","export { CanvasLib } from './main';\n","import { CustomEventTarget } from \"@andreadev/custom-event-target\";\nexport class CanvasLib extends CustomEventTarget {\n    constructor(canvas) {\n        super();\n        this.canvas = canvas;\n        this.plugins = new Map();\n        this.layers = [];\n        this.layersActions = new CustomEventTarget();\n        const ctx = this.canvas.getContext(\"2d\");\n        if (ctx == null) {\n            throw ('Could not get the context for the canvas');\n        }\n        this.context = ctx;\n    }\n    async renderCycle() {\n        await this.paint();\n        window.requestAnimationFrame(() => this.renderCycle());\n    }\n    use(PluginClass, settings) {\n        const plugin = new PluginClass(this, settings);\n        this.plugins.set(plugin.name, plugin);\n    }\n    getPlugin(PluginClass) {\n        for (let plugin of this.plugins.values()) {\n            if (plugin instanceof PluginClass) {\n                return plugin;\n            }\n        }\n        return undefined;\n    }\n    /**\n     * Main paint function for the canvas\n     *\n     * @param shouldClear If true, clear the canvas before painting\n     */\n    async paint(shouldClear = true) {\n        this.prepareContext(shouldClear);\n        const prop = { context: this.context };\n        await this.layersActions.fireEvent('_prerender', prop);\n        for (let layer of this.layers) {\n            await this.layersActions.fireEvent(layer.name, prop);\n        }\n        await this.layersActions.fireEvent('_postrender', prop);\n    }\n    prepareContext(shouldClear = true) {\n        this.context.resetTransform();\n        if (shouldClear) {\n            this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        }\n        this.context.translate(Math.floor(this.canvas.width / 2), Math.floor(this.canvas.height / 2));\n    }\n    /**\n     * Add a new layer to handle drawing on multiple levels\n     */\n    addLayer(name, order) {\n        this.layers.push({\n            name,\n            order\n        });\n        this.layers.sort((a, b) => a.order - b.order);\n    }\n    /**\n     * Remove a layer\n     */\n    removeLayer(name) {\n        this.layers.splice(this.layers.findIndex((l) => l.name == name), 1);\n        this.layersActions.clearListeners(name);\n    }\n    /**\n     * Just a utility function to make the user code less heavy\n     */\n    on(layer, callback) {\n        this.layersActions.addListener(layer, callback);\n    }\n    remove(layer, callback) {\n        this.layersActions.removeListener(layer, callback);\n    }\n    startRendering() {\n        window.requestAnimationFrame(() => this.renderCycle());\n    }\n}\n","export class CustomEventTarget {\n    listeners;\n    constructor() {\n        this.listeners = new Map();\n    }\n    addListener(event, listener) {\n        if (!this.listeners.has(event)) {\n            this.listeners.set(event, []);\n        }\n        this.listeners.get(event).push(listener);\n    }\n    removeListener(event, listener) {\n        if (!this.listeners.has(event))\n            return;\n        let listeners = this.listeners.get(event);\n        let index = listeners.findIndex((x) => x === listener);\n        if (index >= 0) {\n            listeners.splice(index, 1);\n        }\n        this.listeners.set(event, listeners);\n    }\n    /**\n     * Clear all listeners for the specified event\n     */\n    clearListeners(event) {\n        if (!this.listeners.has(event))\n            return;\n        this.listeners.set(event, []);\n    }\n    /**\n     * Clear all listeners for all the events\n     */\n    clearAllListeners() {\n        this.listeners.clear();\n    }\n    /**\n     * Call all the listeners for a specific event in a synchronous way.\n     * If an async listener is found, it gets awaited before continuing.\n     */\n    async fireEvent(event, details) {\n        if (!this.listeners.has(event))\n            return;\n        for (let listener of this.listeners.get(event)) {\n            let val = listener(details);\n            if (val instanceof Promise) {\n                await val;\n            }\n        }\n    }\n    /**\n     * Call all the listeners for a specific event in an asynchronous way.\n     * All the async listeners found are awaited using Promise.all().\n     */\n    async fireEventAsync(event, details) {\n        if (!this.listeners.has(event))\n            return;\n        let promises = [];\n        for (let listener of this.listeners.get(event)) {\n            let ret = listener(details);\n            if (ret instanceof Promise) {\n                promises.push(ret);\n            }\n        }\n        await Promise.all(promises);\n    }\n    /**\n     * Call all the listeners for a specific event as if they were all\n     * synchronous functions. Not recommended, since it doesn't handle\n     * async at all. Only use it when all listeners are synchronous.\n     */\n    fireEventSync(event, details) {\n        if (!this.listeners.has(event))\n            return;\n        for (let listener of this.listeners.get(event)) {\n            listener(details);\n        }\n    }\n}\n","import { throttle } from \"../utils\";\nexport class PanZoomPlugin {\n    constructor(app, settings) {\n        var _a, _b, _c;\n        this.app = app;\n        this.settings = settings;\n        this.name = \"PanZoom\";\n        this.currentZoom = 1;\n        this.minZoom = 0.1;\n        this.maxZoom = 10;\n        this.panButton = 1; // Middle\n        this.cameraOffset = { x: 0, y: 0 };\n        this.isPanning = false;\n        this.startedPanningOffset = { x: 0, y: 0 };\n        this.startedPanningPosition = { x: 0, y: 0 };\n        this.throttle = -1;\n        this.bindEvents();\n        this.minZoom = (_a = settings.minZoom) !== null && _a !== void 0 ? _a : this.minZoom;\n        this.maxZoom = (_b = settings.maxZoom) !== null && _b !== void 0 ? _b : this.maxZoom;\n        this.throttle = (_c = settings.throttle) !== null && _c !== void 0 ? _c : this.throttle;\n        this.throttledPaint = throttle(this.app.paint.bind(this.app), this.throttle);\n        let mouseButtons = {\n            'left': 0,\n            'middle': 1,\n            'right': 2,\n            'any': -1\n        };\n        if (settings.panButton)\n            this.panButton = mouseButtons[settings.panButton];\n    }\n    bindEvents() {\n        this.app.on('_prerender', this.transformCanvas.bind(this));\n        this.app.canvas.addEventListener('pointerdown', this.onPointerDown.bind(this));\n        this.app.canvas.addEventListener('pointerup', this.onPointerUp.bind(this));\n        this.app.canvas.addEventListener('pointermove', this.onPointerMove.bind(this));\n        this.app.canvas.addEventListener('pointerleave', this.onPointerUp.bind(this));\n        this.app.canvas.addEventListener('wheel', this.onScroll.bind(this));\n    }\n    screenToLocalPoint(x, y) {\n        let hw = this.app.canvas.width / 2;\n        let hh = this.app.canvas.height / 2;\n        let tx = this.cameraOffset.x;\n        let ty = this.cameraOffset.y;\n        let z = this.currentZoom;\n        // center\n        x = x - hw;\n        y = y - hh;\n        // scale\n        x = x / z;\n        y = y / z;\n        // trnaslate\n        x = x - tx;\n        y = y - ty;\n        return { x, y };\n    }\n    zoom(amount) {\n        this.currentZoom += amount;\n        this.currentZoom = Math.min(Math.max(this.minZoom, this.currentZoom), this.maxZoom);\n        this.currentZoom = Math.floor(this.currentZoom * 1000) / 1000;\n        this.updateRender();\n    }\n    transformCanvas(prop) {\n        prop.context.scale(this.currentZoom, this.currentZoom);\n        prop.context.translate(this.cameraOffset.x, this.cameraOffset.y);\n    }\n    onPointerDown(e) {\n        if (e.button == this.panButton || this.panButton == -1) {\n            this.isPanning = true;\n            this.startedPanningOffset = this.cameraOffset;\n            this.startedPanningPosition = { x: e.clientX, y: e.clientY };\n        }\n    }\n    onPointerUp(_) {\n        this.isPanning = false;\n    }\n    onPointerMove(e) {\n        if (this.isPanning) {\n            this.cameraOffset = {\n                x: this.startedPanningOffset.x + ((e.clientX - this.startedPanningPosition.x) / this.currentZoom),\n                y: this.startedPanningOffset.y + ((e.clientY - this.startedPanningPosition.y) / this.currentZoom),\n            };\n            this.updateRender();\n        }\n    }\n    onScroll(e) {\n        this.zoom(e.deltaY / 1000);\n    }\n    updateRender() {\n        if (this.throttle > 0) {\n            this.throttledPaint();\n        }\n        else {\n            this.app.paint();\n        }\n    }\n    static getDataFromMatrix(matrix) {\n        return {\n            scaleX: matrix.a,\n            scaleY: matrix.d,\n            translateX: matrix.e,\n            translateY: matrix.f,\n            skewX: matrix.b,\n            skewY: matrix.c\n        };\n    }\n    static fixedNumber(number, context, direction = 'x') {\n        let { scaleX, scaleY } = this.getDataFromMatrix(context.getTransform());\n        return direction == 'x' ? number * (1 / scaleX) : number * (1 / scaleY);\n    }\n    static fixedSize(width, height, context) {\n        let { scaleX, scaleY } = this.getDataFromMatrix(context.getTransform());\n        return {\n            width: width * (1 / scaleX),\n            height: height * (1 / scaleY)\n        };\n    }\n}\n","export function throttle(func, wait) {\n    let timeout;\n    let isThrottled = false;\n    return function () {\n        if (isThrottled) {\n            return;\n        }\n        const context = this;\n        const args = arguments;\n        func.apply(context, args);\n        clearTimeout(timeout);\n        timeout = setTimeout(() => (isThrottled = false), wait);\n        isThrottled = true;\n    };\n}\n","import { ParsedData } from \"es-data-parser\";\nimport { PanZoomPlugin } from \"@andreadev/canvas-lib/dist/modules/pan-zoom-plugin\";\nimport { View } from \"./abstract\";\nimport { CanvasLib } from \"@andreadev/canvas-lib\";\nimport { System } from \"es-data-parser\";\nimport { distanceFromSystem } from \"../game-functions/system\";\nimport { renderSystemSelection, renderSystemPin, renderSystemLinks, renderSystemName } from \"../game-functions/system\";\nimport { renderGalaxy } from \"../game-functions/galaxy\";\nimport { SpriteList } from \"../game-functions/sprites\";\nimport { RenderingProp } from \"@andreadev/canvas-lib/dist/main\";\nimport { loadTemplate, setState } from \"../utils\";\nimport { galaxyViewOptions, systemDetails } from \"./templates/galaxyTemplates\";\n\n\nexport class GalaxyView extends EventTarget implements View {\n\n    shouldRenderNames = true;\n    shouldRenderLinks = true;\n    shouldRenderDots  = true;\n    shouldRenderGalaxies = true;\n    shouldRenderWormholeLinks = true;\n    shouldRenderHiddenWormholes = false;\n    currentlySelected: System | null = null;\n    systemLinksCache: Set<string> = new Set();\n    savedZoom: number = 1;\n    savedPosition = {x: 0, y: 0};\n\n    constructor(private esData: ParsedData, private spriteList: SpriteList, private canvasLib: CanvasLib) { \n        super();\n\n        this.esData = esData;\n        this.canvasLib.canvas.addEventListener('pointerdown', this.onCanvasClick.bind(this));\n\n        this.createAndBindUI();\n    }\n\n    createAndBindUI() {\n        loadTemplate(galaxyViewOptions, '.left-bar .middle');\n        loadTemplate(systemDetails, '.right-bar .middle');\n\n        document.getElementById('toggle-galaxies')?.addEventListener('change', this.toggleGalaxies.bind(this))\n        document.getElementById('toggle-pins')?.addEventListener('change', this.toggleDots.bind(this))\n        document.getElementById('toggle-names')?.addEventListener('change', this.toggleNames.bind(this))\n        document.getElementById('toggle-links')?.addEventListener('change', this.toggleLinks.bind(this))\n        document.getElementById('toggle-wormholes')?.addEventListener('change', this.toggleWormholes.bind(this))\n        document.getElementById('toggle-hidden-wormholes')?.addEventListener('change', this.toggleHiddenWormholes.bind(this))\n    }\n\n    async activate(lib: CanvasLib) {\n\n        this.buildSystemLinksCache();\n\n        await this.preloadGalaxySprites();\n\n        lib.addLayer('galaxies', 0);\n        lib.addLayer('links', 1);\n        lib.addLayer('wormhole-links', 2);\n        lib.addLayer('systems', 3);\n\n        lib.on('galaxies', this.renderGalaxies.bind(this));\n        lib.on('links', this.renderLinks.bind(this));\n        lib.on('wormhole-links', this.renderWormholeLinks.bind(this));\n        lib.on('systems', this.renderSystems.bind(this));\n\n        // Reset lib zoom and position as when the view was left\n        let panZoomPlug = lib.getPlugin(PanZoomPlugin)!;\n        panZoomPlug.currentZoom = this.savedZoom;\n        panZoomPlug.cameraOffset = this.savedPosition;\n    }\n\n    async deactivate(lib: CanvasLib) {\n        lib.removeLayer('galaxies');\n        lib.removeLayer('links');\n        lib.removeLayer('wormhole-links');\n        lib.removeLayer('systems');\n\n        let panZoomPlug = lib.getPlugin(PanZoomPlugin)!;\n        this.savedZoom = panZoomPlug.currentZoom;\n        this.savedPosition = panZoomPlug.cameraOffset;\n    }\n\n    toggleNames(e: Event) {\n        this.shouldRenderNames = (<HTMLInputElement>e.target).checked; \n        this.canvasLib.paint();\n    }\n    toggleLinks(e: Event) {\n        this.shouldRenderLinks = (<HTMLInputElement>e.target).checked; \n        this.canvasLib.paint();\n    }\n    toggleDots(e: Event) {\n        this.shouldRenderDots = (<HTMLInputElement>e.target).checked; \n        this.canvasLib.paint();\n    }\n    toggleGalaxies(e: Event) {\n        this.shouldRenderGalaxies = (<HTMLInputElement>e.target).checked; \n        this.canvasLib.paint();\n    }\n    toggleWormholes(e: Event) {\n        this.shouldRenderWormholeLinks = (<HTMLInputElement>e.target).checked; \n        this.canvasLib.paint();\n    }\n    toggleHiddenWormholes(e: Event) {\n        this.shouldRenderHiddenWormholes = (<HTMLInputElement>e.target).checked; \n        this.canvasLib.paint();\n    }\n\n    onCanvasClick(e: PointerEvent) {\n        if (e.button !== 0) return;\n\n        let panZoomPlugin = this.canvasLib.getPlugin(PanZoomPlugin);\n        if (!panZoomPlugin) return;\n\n        let point = panZoomPlugin.screenToLocalPoint(e.clientX, e.clientY);\n\n        let closest: System | null = null;\n        let closestDistance = 10000; // High number\n        let minimumDistance = 10;\n        let ctx = this.canvasLib.canvas.getContext('2d');\n        if (ctx) {\n            minimumDistance = PanZoomPlugin.fixedNumber(10, ctx);\n        }\n\n        for (let system of this.esData.starSystems.values()) {\n            let d = distanceFromSystem(system, point);\n            if (d > minimumDistance) continue;\n\n            if (!closest || d < closestDistance) {\n                closest = system;\n                closestDistance = d;\n            }\n        }\n\n        if (!closest) {\n            this.removeSelection();\n            return;\n        }\n\n        this.selectSystem(closest);\n    }\n\n    removeSelection() {\n        if (!this.currentlySelected) return;\n\n        this.currentlySelected.isSelected = false;\n        this.currentlySelected = null;\n\n        this.canvasLib.paint();\n    }\n\n    selectSystem(system: System) {\n        this.currentlySelected = system;\n        this.updateStarSystemInfo(system);\n\n        setState({\n            selectedSystem: system.name,\n        });\n        \n        this.canvasLib.paint();\n    }\n\n    updateStarSystemInfo(system: System) {\n        document.querySelector('#system-name .value')!.textContent = system.name;\n        document.querySelector('#system-position .value')!.textContent = `${system.position.x}, ${system.position.y}`;\n        document.querySelector('#system-government .value')!.textContent = system.government;\n        document.querySelector('#system-attributes .value')!.textContent = system.attributes.join(', ');\n    }\n\n    buildSystemLinksCache() {\n        this.systemLinksCache = new Set();\n        for (let system of this.esData.starSystems.values()) {\n            for (let linked of system.links) {\n                let linkTxt = `${system.name}___${linked}`;\n                let reverseLinkTxt = `${linked}___${system.name}`;\n\n                if (this.systemLinksCache.has(reverseLinkTxt)) continue;\n\n                this.systemLinksCache.add(linkTxt);\n            }\n        }\n    }\n\n    async preloadGalaxySprites() {\n        for (let galaxy of this.esData.galaxies.values()) {\n            let spriteFile = this.spriteList.sprites.get(galaxy.sprite);\n            if (!spriteFile) continue;\n\n            await this.spriteList.load(galaxy.sprite, spriteFile);\n        }\n    }\n\n    async renderGalaxies({ context }: RenderingProp) {\n        if (!this.esData) return;\n\n        // Draw all galaxies\n        if (this.shouldRenderGalaxies) {\n            for (let galaxy of this.esData.galaxies.values()) {\n                await renderGalaxy(galaxy, this.spriteList, context);\n            }\n        }\n    }\n\n    async renderLinks({ context }: RenderingProp) {\n        if (!this.esData || !this.shouldRenderLinks) return;\n\n        // Draw all links\n        context.lineWidth = PanZoomPlugin.fixedNumber(1, context);\n        context.strokeStyle = 'rgba(255,255,255,0.2)';\n        for (let link of this.systemLinksCache.values()) {\n            let [originName, targetName] = link.split('___');\n\n            let origin = this.esData.starSystems.get(originName);\n            let target = this.esData.starSystems.get(targetName);\n\n            if (!target || !origin)\n                continue;\n\n            context.beginPath();\n            context.moveTo(origin.position.x, origin.position.y);\n\n            context.lineTo(target.position.x, target.position.y);\n            context.stroke();\n        }\n    }\n\n    async renderWormholeLinks({ context }: RenderingProp) {\n        if (!this.esData || !this.shouldRenderWormholeLinks) return;\n\n        // Draw all links\n        context.lineWidth = PanZoomPlugin.fixedNumber(1, context);\n        context.strokeStyle = 'rgba(100,100,255,0.5)';\n        for (let wormhole of this.esData.wormholes.values()) {\n            if (!wormhole.isMappable && !this.shouldRenderHiddenWormholes) continue;\n\n            for (let link of wormhole.links) {\n                let [originName, targetName] = link;\n\n                let origin = this.esData.starSystems.get(originName);\n                let target = this.esData.starSystems.get(targetName);\n\n                if (!target || !origin)\n                    continue;\n\n                context.beginPath();\n                context.moveTo(origin.position.x, origin.position.y);\n\n                context.lineTo(target.position.x, target.position.y);\n                context.stroke();\n            }\n        }\n    }\n\n    async renderSystems({ context }: RenderingProp) {\n        if (!this.esData) return;\n\n        // Draw all systems\n        for (let system of this.esData.starSystems.values()) {\n            if (this.currentlySelected == system)\n                renderSystemSelection(system, context);\n\n            if (this.shouldRenderDots) {\n                renderSystemPin(system, context);\n            }\n\n            if (this.shouldRenderNames) {\n                renderSystemName(system, context);\n            }\n        }\n    }\n}\n","import { System } from 'es-data-parser';\nimport { PanZoomPlugin } from '@andreadev/canvas-lib/dist/modules/pan-zoom-plugin';\nimport { Color } from 'es-data-parser';\nimport { Point } from 'es-data-parser';\n\nconst pinSize = 3;\nconst pinLineWidth = 2;\nconst linkColor = 'rgba(255,255,255,0.2)';\nconst tagNameOffset = 4;\nconst tagNameColor = 'rgba(255,255,255,0.3)';\nconst tagNameFontSize = 12;\n\n/**\n * Calculate the distance of a point to a star system\n */\nexport function distanceFromSystem(system: System, position: Point): number {\n    return Math.sqrt(\n        Math.pow(system.position.x - position.x, 2) +\n        Math.pow(system.position.y - position.y, 2)\n    );\n}\n\n/**\n * Rendering function for the endless sky systems\n */\nexport function renderSystem(system: System, ctx: CanvasRenderingContext2D) {\n    // renderSystemSelection(system, ctx);\n    renderSystemLinks(system, ctx);\n    renderSystemPin(system, ctx);\n    renderSystemName(system, ctx);\n}\n\nexport function renderSystemSelection(system: System, ctx: CanvasRenderingContext2D) {\n    ctx.beginPath();\n    ctx.fillStyle = 'rgba(100,100,255,0.2)';\n    ctx.strokeStyle = 'darkblue';\n    ctx.lineWidth = PanZoomPlugin.fixedNumber(1, ctx);\n    let width = PanZoomPlugin.fixedNumber(15, ctx);\n    ctx.ellipse(\n        system.position.x,\n        system.position.y,\n        width,\n        width,\n        0, 0, 2 * Math.PI\n    );\n    ctx.fill();\n    ctx.stroke();\n}\n\nexport function renderSystemLinks(system: System, ctx: CanvasRenderingContext2D) {\n    // Render the links\n    ctx.lineWidth = PanZoomPlugin.fixedNumber(1, ctx);\n    ctx.strokeStyle = linkColor;\n\n    for (let link of system.links) {\n        ctx.beginPath();\n        ctx.moveTo(system.position.x, system.position.y);\n\n        const targetSystem = system.esData.starSystems.get(link);\n        if (!targetSystem)\n            continue;\n\n        ctx.lineTo(targetSystem.position.x, targetSystem.position.y);\n        ctx.stroke();\n    }\n}\n\nexport function renderSystemPin(system: System, ctx: CanvasRenderingContext2D) {\n    // Render the circle\n    // Get the government color\n    let color = Color.fromGovernment(system.esData, system.government)?.toString();\n    if (!color) {\n        color = '#aaa';\n    }\n\n    ctx.beginPath();\n    ctx.fillStyle = 'black';\n    ctx.strokeStyle = color;\n    ctx.lineWidth = PanZoomPlugin.fixedNumber(pinLineWidth, ctx);\n    let {width, height} = PanZoomPlugin.fixedSize(pinSize, pinSize, ctx);\n    ctx.ellipse(system.position.x, system.position.y, width, height, 0, 0, 2 * Math.PI);\n    ctx.fill();\n    ctx.stroke();\n}\n\nexport function renderSystemName(system: System, ctx: CanvasRenderingContext2D) {\n    // Render the name\n    let { scaleX: scale } = PanZoomPlugin.getDataFromMatrix(ctx.getTransform());\n    // If it's too small to render the name, interrupt the export function\n    if (scale < 0.5) {\n        return;\n    }\n\n    let fontSize = PanZoomPlugin.fixedNumber(tagNameFontSize, ctx)\n    ctx.font = `${fontSize}px Arial`;\n    ctx.fillStyle = tagNameColor;\n    let offset = PanZoomPlugin.fixedNumber(tagNameOffset, ctx);\n    let {width, height} = PanZoomPlugin.fixedSize(pinSize, pinSize, ctx);\n    ctx.fillText(system.name, system.position.x + width + offset, system.position.y + height);\n}\n","import { Galaxy } from \"es-data-parser\";\nimport { SpriteList } from \"./sprites\";\n\nexport async function renderGalaxy(galaxy: Galaxy, spriteList: SpriteList, ctx: CanvasRenderingContext2D) {\n    // Render the sprite\n    if (galaxy.sprite == '') {\n        return;\n    }\n\n    let spriteImage : HTMLImageElement | undefined = spriteList.loadedSprites.get(galaxy.sprite);\n\n    // The sprite image isn't loaded\n    if (!spriteImage) {\n        const spriteFile = spriteList.sprites.get(galaxy.sprite);\n\n        if (!spriteFile) {\n            console.error(`Sprite ${galaxy.sprite} not found`);\n            return;\n        }\n\n        spriteImage = await spriteList.load(galaxy.sprite, spriteFile);\n    }\n\n    ctx.drawImage(\n        spriteImage,\n        galaxy.position.x - (spriteImage.width / 2),\n        galaxy.position.y - (spriteImage.height / 2)\n    );\n}\n","export const openDirectory = async (): Promise<File[]> => {\n    // Use older apis because File System Access API seems to be working unnaturally\n    return new Promise((resolve) => {\n        const input = document.createElement('input');\n        input.type = 'file';\n        input.webkitdirectory = true;\n        \n        input.addEventListener('change', () => {\n            let files = Array.from(input.files as FileList);\n            resolve(files);\n        });\n        if ('showPicker' in HTMLInputElement.prototype) {\n            input.showPicker();\n        } else {\n            input.click();\n        }\n    });\n};\n\n// This should probably used in the library\nexport const throttle = (fn: Function, wait: number = 300) => {\n    let inThrottle: boolean;\n    let lastFn: ReturnType<typeof setTimeout>;\n    let lastTime: number;\n\n    return function (this: any) {\n        const context = this,\n        args = arguments;\n        if (!inThrottle) {\n            fn.apply(context, args);\n            lastTime = Date.now();\n            inThrottle = true;\n        } else {\n            clearTimeout(lastFn);\n            lastFn = setTimeout(() => {\n                if (Date.now() - lastTime >= wait) {\n                    fn.apply(context, args);\n                    lastTime = Date.now();\n                }\n            }, Math.max(wait - (Date.now() - lastTime), 0));\n        }\n    };\n};\n\n// Load image\nexport function loadImage(file: File): Promise<HTMLImageElement> {\n    return new Promise((resolve, reject) => {\n        let img = new Image();\n        img.onload = () => {\n            resolve(img);\n        }\n        img.onerror = () => {\n            reject();\n        }\n        img.src = URL.createObjectURL(file);\n    });\n}\n\n/*\n * Load an html template built with text and insert it into an\n * element by its query selector\n */\nexport function loadTemplate(template: string, parentSelector: string) {\n    let parent = document.querySelector(parentSelector);\n    if (!parent) {\n        throw new Error(`Cannot load template because parent element doesn't exists (\"${parentSelector}\")`);\n    }\n\n    let templateEl = document.createElement('template');\n    templateEl.innerHTML = template;\n    let node = templateEl.content.firstChild?.cloneNode(true)!;\n\n    parent.appendChild(node);\n}\n\nexport interface AppState {\n    selectedSystem: string | null,\n}\n\nexport function setState(state: AppState) {\n    history.pushState(state, '');\n}\n\nexport function getState(): AppState | null {\n    return history.state;\n}\n","export const galaxyViewOptions = \n`<div class=\"container view-galaxy\">\n    <div class=\"title\">\n        Galaxy View\n    </div>\n    <div class=\"body vertical-stack\">\n        <div class=\"field\">\n            <label>\n                <input id=\"toggle-galaxies\" type=\"checkbox\" checked> Galaxies\n            </label>\n        </div>\n        <div class=\"field\">\n            <label>\n                <input id=\"toggle-pins\" type=\"checkbox\" checked> System pins\n            </label>\n        </div>\n        <div class=\"field\">\n            <label>\n                <input id=\"toggle-names\" type=\"checkbox\" checked> System names\n            </label>\n        </div>\n        <div class=\"field\">\n            <label>\n                <input id=\"toggle-links\" type=\"checkbox\" checked> System links\n            </label>\n        </div>\n        <div class=\"field\">\n            <label>\n                <input id=\"toggle-wormholes\" type=\"checkbox\" checked> System wormholes\n            </label>\n        </div>\n        <div class=\"field\">\n            <label>\n                <input id=\"toggle-hidden-wormholes\" type=\"checkbox\"> Show hidden wormholes\n            </label>\n        </div>\n    </div>\n</div>`;\n\nexport const systemDetails = \n`<div class=\"container view-galaxy\">\n    <div class=\"title\">\n        Star system info\n    </div>\n    <div class=\"body vertical-stack\">\n        <div id=\"system-name\" class=\"field\">Name: <span class=\"value\"></span></div>\n        <div id=\"system-position\" class=\"field\">Position (x, y): <span class=\"value\"></span></div>\n        <div id=\"system-government\" class=\"field\">Government: <span class=\"value\"></span></div>\n        <div id=\"system-attributes\" class=\"field\">Attributes: <span class=\"value\"></span></div>\n    </div>\n</div>`;\n","import { ParsedData, System } from \"es-data-parser\";\nimport { View } from \"./abstract\";\nimport { SpriteList } from \"../game-functions/sprites\";\nimport { CanvasLib } from \"@andreadev/canvas-lib\";\nimport { RenderingProp } from \"@andreadev/canvas-lib/dist/main\";\nimport { renderObject, renderObjectOrbit } from \"../game-functions/object\";\nimport { getState, loadTemplate } from \"../utils\";\nimport { systemViewOptions, systemsList } from \"./templates/systemTemplates\";\n\nexport class SystemView extends EventTarget implements View {\n    system: System | null = null;\n    shouldRenderOrbits = true;\n    shouldRenderObjects = true;\n\n    constructor(private esData: ParsedData, private spriteList: SpriteList, private canvasLib: CanvasLib) {\n        super();\n\n        this.esData = esData;\n        this.canvasLib = canvasLib;\n\n        this.createAndBindUI(esData, canvasLib);\n    }\n\n    createAndBindUI(esData: ParsedData, lib: CanvasLib) {\n        loadTemplate(systemViewOptions, '.left-bar .middle');\n        loadTemplate(systemsList, '.top-bar .middle');\n\n        document.getElementById('toggle-orbits')?.addEventListener('change', this.toggleOrbits.bind(this));\n        document.getElementById('toggle-objects')?.addEventListener('change', this.toggleObjects.bind(this));\n\n        // Add all systems to the list\n        let systemSelect = document.getElementById('system-selection')!;\n        for (let systemName of esData.starSystems.keys()) {\n            let opt = document.createElement('option');\n            opt.value = systemName;\n            opt.innerText = systemName;\n            systemSelect.appendChild(opt);\n        }\n\n        systemSelect.addEventListener('change', (e) => {\n            let systemName = (<HTMLSelectElement>e.target).selectedOptions[0]?.value;\n            this.setSystem(systemName);\n            lib.paint();\n        });\n    }\n\n    async setSystem(systemName: string) {\n        if (!this.esData.starSystems.has(systemName)) {\n            throw new Error(\"System name not found\");\n        }\n\n        this.system = this.esData.starSystems.get(systemName)!;\n\n        await this.preloadObjectsSprites();\n    }\n\n    async activate(lib: CanvasLib) {\n        let systemList = <HTMLSelectElement> document.getElementById('system-selection');\n\n        let state = getState();\n        if (state?.selectedSystem) {\n            this.setSystem(state.selectedSystem);\n            systemList.value = state.selectedSystem;\n        }\n\n\n        await this.preloadObjectsSprites();\n\n        lib.addLayer('background', 0);\n        lib.addLayer('boundaries', 1);\n        lib.addLayer('objects', 2);\n\n        lib.on('objects', this.renderOrbits.bind(this));\n        lib.on('objects', this.renderObjects.bind(this));\n    }\n\n    async deactivate(lib: CanvasLib) {\n        lib.removeLayer('background');\n        lib.removeLayer('boundaries');\n        lib.removeLayer('objects');\n    }\n\n    async preloadObjectsSprites() {\n        if (!this.system) return;\n\n        for (let object of this.system.objects.values()) {\n            if (!object.sprite) continue;\n\n            let spriteFile = this.spriteList.sprites.get(object.sprite.name);\n            if (!spriteFile) continue;\n\n            await this.spriteList.load(object.sprite.name, spriteFile);\n        }\n    }\n\n    toggleOrbits(e: Event) {\n        this.shouldRenderOrbits = (<HTMLInputElement>e.target).checked;\n        this.canvasLib.paint();\n    }\n\n    toggleObjects(e: Event) {\n        this.shouldRenderObjects = (<HTMLInputElement>e.target).checked;\n        this.canvasLib.paint();\n    }\n\n    async renderOrbits({ context }: RenderingProp) {\n        if (!this.esData || !this.system) return;\n\n        if (!this.shouldRenderOrbits) return;\n\n        context.strokeStyle = 'blue';\n        for (let object of this.system.objects.values()) {\n            await renderObjectOrbit(object, context);\n        }\n        // reset to default\n        context.strokeStyle = '#000';\n    }\n\n    async renderObjects({ context }: RenderingProp) {\n        if (!this.esData || !this.system) return;\n\n        if (!this.shouldRenderObjects) return;\n\n        for (let object of this.system.objects.values()) {\n            await renderObject(object, this.spriteList, context);\n        }\n    }\n}\n","import { SystemObject } from \"es-data-parser\";\nimport { SpriteList, printSprite } from \"./sprites\";\n\nexport async function renderObjectOrbit(object: SystemObject, ctx: CanvasRenderingContext2D) {\n    ctx.beginPath();\n    ctx.arc(0, 0, object.distance, 0, 2 * Math.PI);\n    ctx.stroke();\n    \n    let angle = 90;\n    angle += object.offset;\n    angle *= Math.PI / 180;\n\n    ctx.rotate(angle);\n    ctx.translate(0, -object.distance);\n\n    for (let child of object.objects) {\n        await renderObjectOrbit(child, ctx);\n    }\n\n    ctx.translate(0, object.distance);\n    ctx.rotate(-angle);\n}\n\nexport async function renderObject(object: SystemObject, spriteList: SpriteList, ctx: CanvasRenderingContext2D) {\n    // Render the sprite\n    if (object.sprite == null) {\n        return;\n    }\n\n    let spriteImage : HTMLImageElement | undefined = spriteList.loadedSprites.get(object.sprite.name);\n    const spriteFile = spriteList.sprites.get(object.sprite.name);\n\n    if (!spriteFile) {\n        console.error(`Sprite ${object.sprite} not found`);\n        return;\n    }\n\n    // The sprite image isn't loaded\n    if (!spriteImage) {\n        spriteImage = await spriteList.load(object.sprite.name, spriteFile);\n    }\n\n    // Draw the planet/star\n    let angle = 90;\n    angle += object.offset;\n    angle *= Math.PI / 180;\n\n    ctx.save();\n    if (object.distance > 0)\n        ctx.rotate(angle);\n    ctx.translate(0, -object.distance);\n\n    printSprite(\n        spriteFile.name,\n        spriteImage,\n        object.sprite.scale,\n        ctx\n    );\n\n    if (object.distance > 0)\n        ctx.rotate(-angle);\n\n    for (let child of object.objects) {\n        await renderObject(child, spriteList, ctx);\n    }\n\n    ctx.restore();\n}\n","import { loadImage } from \"../utils\";\n\nexport class SpriteList {\n    sprites: Map<string, File> = new Map();\n    loadedSprites: Map<string, HTMLImageElement> = new Map();\n\n    constructor() {}\n\n    async load(spriteName: string, file: File) {\n        let img = await loadImage(file);\n        this.loadedSprites.set(spriteName, img);\n        return img;\n    }\n}\n\nexport function printSprite(filename: string, image: HTMLImageElement, scale: number, ctx: CanvasRenderingContext2D) {\n    let [name, _] = filename.split('.');\n\n    // additive -> lighter\n    switch (name.at(-1)) {\n        case '+':\n        case '~':\n            ctx.globalCompositeOperation = 'lighter';\n    }\n\n    let printWidth = image.width * scale;\n    let printHeight = image.height * scale;\n\n    ctx.drawImage(\n        image,\n        - (printWidth/2),\n        - (printHeight/2),\n        printWidth,\n        printHeight\n    );\n    \n    ctx.globalCompositeOperation = 'source-over';\n}\n","export const systemViewOptions = \n`<div class=\"container view-system\">\n    <div class=\"title\">\n        System View\n    </div>\n    <div class=\"body vertical-stack\">\n        <div class=\"field\">\n            <label>\n                <input id=\"toggle-orbits\" type=\"checkbox\" checked> Orbits\n            </label>\n        </div>\n        <div class=\"field\">\n            <label>\n                <input id=\"toggle-objects\" type=\"checkbox\" checked> Planets / Stars\n            </label>\n        </div>\n    </div>\n</div>`;\n\nexport const systemsList = \n`<div class=\"container view-system\">\n    <div class=\"body\">\n        <label>System: \n            <select id=\"system-selection\"><option value=\"-\">---</option></select>\n        </label>\n    </div>\n</div>`;\n","import { ParsedData } from \"es-data-parser\";\nimport { View } from \"./abstract\";\nimport { CanvasLib } from \"@andreadev/canvas-lib\";\nimport { SpriteList } from \"../game-functions/sprites\";\nimport { loadTemplate } from \"../utils\";\nimport { savefileLoad } from \"./templates/missionTemplates\";\n\ninterface SaveFileData {\n    missions: string[];\n}\n\nexport class MissionsView extends EventTarget implements View {\n    private saveFileData: SaveFileData;\n\n    constructor(private esData: ParsedData, private spriteList: SpriteList, private canvasLib: CanvasLib) {\n        super();\n        \n        this.saveFileData = {\n            missions: []\n        };\n\n        this.createAndBindUI();\n    }\n\n    createAndBindUI() {\n        loadTemplate(savefileLoad, '.top-bar .middle');\n\n        document.querySelector('#view-missions-savefile-picker input')?.addEventListener('change', this.onLoadSaveFile.bind(this));\n    }\n\n    onLoadSaveFile(_event: Event) {\n        console.log(\"Loading save file...\");\n        \n        let input: HTMLInputElement = document.querySelector('#view-missions-savefile-picker input')!;\n        \n        if (input.files == null) return;\n\n        let file = input.files[0];\n\n        if (file == null) return;\n\n        let reader = new FileReader();\n        reader.addEventListener('load', () => {\n            let text: string = reader.result as string;\n            this.parseSaveFile(text);\n        });\n\n        reader.readAsText(file);\n    }\n\n    parseSaveFile(text: string) {\n        let [_, conditions] = text.split(\"\\nconditions\\n\");\n        let lines = conditions.split(\"\\n\");\n        lines = lines.filter(line => {\n            return line.includes(': offered\"')\n                || line.includes(': active\"')\n                || line.includes(': done\"')\n                || line.includes(': failed\"')\n                || line.includes(': declined\"');\n        });\n        lines = lines.map(l => l.split('\"')[1]);\n        // TODO: continuare\n        console.log(lines);\n    }\n\n    async activate(_lib: CanvasLib) {\n        return;\n    }\n\n    async deactivate(_lib: CanvasLib) {\n        return;\n    }\n}\n","export const savefileLoad =\n`<label id=\"view-missions-savefile-picker\" class=\"view-missions btn label-file-picker\">Load savefile\n    <input type=\"file\" accept=\".txt\">\n</label>`;\n","import { CanvasLib } from \"@andreadev/canvas-lib\";\nimport { PanZoomPlugin } from \"@andreadev/canvas-lib/dist/modules/pan-zoom-plugin\";\nimport { ParsedData } from \"es-data-parser\";\nimport { setCurrentView } from \"./setupCanvasLib\";\n\nexport function bindUI(lib: CanvasLib, data: ParsedData) {\n    // Setup event listeners for the UI\n    document.getElementById('zoom-in')?.addEventListener('click', () => {\n        const panZoomPlugin = lib.getPlugin(PanZoomPlugin);\n\n        if (!panZoomPlugin) return;\n\n        panZoomPlugin.zoom(0.2);\n    });\n\n    document.getElementById('zoom-out')?.addEventListener('click', () => {\n        const panZoomPlugin = lib.getPlugin(PanZoomPlugin);\n\n        if (!panZoomPlugin) return;\n\n        panZoomPlugin.zoom(-0.2);\n    });\n\n    document.getElementById('galaxy-tab')?.addEventListener('click', () => {\n        setCurrentView(lib, 'galaxy');\n    });\n\n    document.getElementById('system-tab')?.addEventListener('click', () => {\n        setCurrentView(lib, 'system');\n    });\n\n    document.getElementById('missions-tab')?.addEventListener('click', () => {\n        setCurrentView(lib, 'missions');\n    });\n}\n"],"names":[],"version":3,"file":"index.b7a05eb9.js.map","sourceRoot":"/__parcel_source_root/"}